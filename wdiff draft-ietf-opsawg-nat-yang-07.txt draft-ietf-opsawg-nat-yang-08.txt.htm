<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>wdiff draft-ietf-opsawg-nat-yang-07.txt draft-ietf-opsawg-nat-yang-08.txt</title><style id="zoomLevel-styles"></style></head><body style="font-size: 17.6px !important; line-height: 21.0834px !important;">
<pre style="font-size: 14.3px !important; line-height: 17.71px !important;">
Network Working Group                                       M. Boucadair
Internet-Draft                                                    Orange
Intended status: Standards Track                            S. Sivakumar
Expires: May <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">3,</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">12,</font></strong> 2018                                      Cisco Systems
                                                            C. Jacquenet
                                                                  Orange
                                                           S. Vinapamula
                                                        Juniper Networks
                                                                   Q. Wu
                                                                  Huawei
                                                        <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">October 30,</font></strike>
                                                        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">November 8,</font></strong> 2017

  A YANG Data Model for Network Address Translation (NAT) and Network
                        Prefix Translation (NPT)
                     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">draft-ietf-opsawg-nat-yang-07</font></strike>
                     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">draft-ietf-opsawg-nat-yang-08</font></strong>

Abstract

   For the sake of network automation and the need for programming
   Network Address Translation (NAT) function in particular, a data
   model for configuring and managing the NAT is essential.  This
   document defines a YANG module for the NAT function.

   NAT44, Network Address and Protocol Translation from IPv6 Clients to
   IPv4 Servers (NAT64), Customer-side transLATor (CLAT), Explicit
   Address Mappings for Stateless IP/ICMP Translation (SIIT EAM), and
   IPv6 Network Prefix Translation (NPTv6) are covered in this document.

Editorial Note (To be removed by RFC Editor)

   Please update these statements with the RFC number to be assigned to
   this document:

      "This version of this YANG module is part of RFC XXXX;"

      "RFC XXXX: A YANG Data Model for Network Address Translation (NAT)
      and Network Prefix Translation (NPT)";

      "reference: RFC XXXX"

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">3,</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">12,</font></strong> 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
     1.2.  Tree Diagrams . . . . . . . . . . . . . . . . . . . . . .   5
   2.  Overview of the NAT YANG Data Model . . . . . . . . . . . . .   5
     2.1.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .   5
     2.2.  Various <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Translation</font></strong> Flavors . . . . . . . . . . . . . . . <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">. . . .</font></strike>   6
     2.3.  TCP, UDP and ICMP NAT Behavioral Requirements . . . . . .   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">6</font></strike>   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">7</font></strong>
     2.4.  Other Transport Protocols . . . . . . . . . . . . . . . .   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">6</font></strike>   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">7</font></strong>
     2.5.  IP Addresses Used for Translation . . . . . . . . . . . .   7
     2.6.  Port Set Assignment . . . . . . . . . . . . . . . . . . .   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">7</font></strike>   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">8</font></strong>
     2.7.  Port-Restricted IP Addresses  . . . . . . . . . . . . . .   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">7</font></strike>   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">8</font></strong>
     2.8.  NAT Mapping Entries . . . . . . . . . . . . . . . . . . .   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">7</font></strike>   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">8</font></strong>
     2.9.  Resource Limits . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">10</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">11</font></strong>
     2.10. Binding the NAT Function to an External Interface <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">or VRF   10</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">. . . .  11</font></strong>
     2.11. <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Relationship to NATV2-MIB . . . . . . . . . . . . . . . .  11
     2.12.</font></strong> Tree Structure  . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">11</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">12</font></strong>
   3.  NAT YANG Module . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">15</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">16</font></strong>
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">52</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">62</font></strong>
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">53</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">64</font></strong>
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">53</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">64</font></strong>
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">54</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">64</font></strong>
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">54</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">64</font></strong>
     7.2.  Informative References  . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">55</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">66</font></strong>
   Appendix A.  Sample Examples  . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">57</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">68</font></strong>
     A.1.  Traditional NAT44 . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">58</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">68</font></strong>
     A.2.  CGN . . . . . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">59</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">70</font></strong>
     A.3.  CGN Pass-Through  . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">62</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">73</font></strong>
     A.4.  NAT64 . . . . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">63</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">74</font></strong>
     A.5.  Explicit Address Mappings for Stateless IP/ICMP
           Translation . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">64</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">75</font></strong>
     A.6.  Static Mappings with Port Ranges  . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">67</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">78</font></strong>
     A.7.  Static Mappings with IP Prefixes  . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">67</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">78</font></strong>
     A.8.  Destination NAT . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">68</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">79</font></strong>
     A.9.  CLAT  . . . . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">71</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">82</font></strong>
     A.10. NPTv6 . . . . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">71</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">82</font></strong>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">74</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">85</font></strong>

1.  Introduction

   This document defines a data model for Network Address Translation
   (NAT) and Network Prefix Translation (NPT) capabilities using the
   YANG data modeling language [RFC7950].

   Traditional NAT is defined in [RFC2663], while Carrier Grade NAT
   (CGN) is defined in [RFC6888].  Unlike traditional NAT, the CGN is
   used to optimize the usage of global IP address space at the scale of
   a domain: a CGN is not managed by end users, but by service providers
   instead.  This document covers both traditional NATs and CGNs.

   This document also covers NAT64 [RFC6146], customer-side translator
   (CLAT) [RFC6877], Explicit Address Mappings for Stateless IP/ICMP
   Translation (EAM) [RFC7757], and IPv6 Network Prefix Translation
   (NPTv6) [RFC6296].  The full set of translation schemes that are in
   scope is included in Section 2.2.

   Sample examples are provided in Appendix A.  These examples are not
   intended to be exhaustive.

1.1.  Terminology

   This document makes use of the following terms:

   o  Basic NAT44: translation is limited to IP addresses alone
      (Section 2.1 of [RFC3022]).

   o  Network Address/Port Translator (NAPT): translation in NAPT is
      extended to include IP addresses and transport identifiers (such
      as a TCP/UDP port or ICMP query ID); refer to Section 2.2 of
      [RFC3022].

   o  Destination NAT: is a translation that acts on the destination IP
      address and/or destination port number.  This flavor is usually
      deployed in load balancers or at devices in front of public
      servers.

   o  Port-restricted IPv4 address: An IPv4 address with a restricted
      port set.  Multiple hosts may share the same IPv4 address;
      however, their port sets must not overlap [RFC7596].

   o  Restricted port set: A non-overlapping range of allowed external
      ports to use for NAT operation.  Source ports of IPv4 packets
      translated by a NAT must belong to the assigned port set.  The
      port set is used for all port-aware IP protocols [RFC7596].

   o  Internal Host: A host that may solicit a NAT or an NPTv6 (or both)
      capability to send to and receive traffic from the Internet.

   o  Internal Address/prefix: The IP address/prefix of an internal
      host.

   o  External Address: The IP address/prefix assigned by a NAT/NPTv6 to
      an internal host; this is the address that will be seen by a
      remote host on the Internet.

   o  Mapping: denotes a state at the NAT that is necessary for network
      address and/or port translation.

   o  Dynamic implicit mapping: is created implicitly as a side effect
      of processing a packet (e.g., an initial TCP SYN packet) that
      requires a new mapping.  A validity lifetime is associated with
      this mapping.

   o  Dynamic explicit mapping: is created as a result of an explicit
      request, e.g., PCP message [RFC6887].  A validity lifetime is
      associated with this mapping.

   o  Static explicit mapping: is created using, e.g., a CLI interface.
      This mapping is likely to be maintained by the NAT function till
      an explicit action is executed to remove it.

   The usage of the term NAT in this document refers to any NAT flavor
   (NAT44, NAT64, etc.) indifferently.

   This document uses the term "session" as defined in [RFC2663] and
   [RFC6146] for NAT64.

1.2.  Tree Diagrams

   The meaning of the symbols in these diagrams is as follows:

   o  Brackets "[" and "]" enclose list keys.

   o  Curly braces "{" and "}" contain names of optional features that
      make the corresponding node conditional.

   o  Abbreviations before data node names: "rw" means configuration
      (read-write), "ro" state data (read-only).

   o  Symbols after data node names: "?" means an optional node, "!" a
      container with presence, and "*" denotes a "list" or "leaf-list".

   o  Parentheses enclose choice and case nodes, and case nodes are also
      marked with a colon (":").

   o  Ellipsis ("...") stands for contents of subtrees that are not
      shown.

2.  Overview of the NAT YANG Data Model

2.1.  Overview

   The NAT YANG module is designed to cover dynamic implicit mappings
   and static explicit mappings.  The required functionality to instruct
   dynamic explicit mappings is defined in separate documents such as
   [I-D.boucadair-pcp-yang].  Considerations about instructing explicit
   dynamic means (e.g., [RFC6887], [RFC6736], or [RFC8045]) are out of
   scope.

   A single NAT device can have multiple NAT instances; each of these
   instances can be provided with its own policies (e.g., be responsible
   for serving a group of hosts).  This document does not make any
   assumption about how internal hosts or flows are associated with a
   given NAT instance.

   The NAT YANG module assumes that each NAT instance can be enabled/
   disabled, be provisioned with a specific set of configuration data,
   and maintains its own mapping tables.

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Further, the</font></strike>

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">The</font></strong> NAT YANG module allows for a NAT instance to be provided with
   multiple NAT policies <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">(policy).</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">(/nat/instances/instance/policy).</font></strong>  The document
   does not make any assumption about how flows are associated with a
   given NAT policy of a given NAT instance.  Classification filters are
   out of scope.

   Defining multiple NAT instances or configuring multiple NAT policies
   within one single NAT instance is implementation- and deployment-
   specific.

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">To accommodate deployments where [RFC6302] is not enabled, this</font></strike>

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">This</font></strong> YANG module allows to instruct a NAT function to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">log the destination port
   number.  The reader may refer to [I-D.ietf-behave-ipfix-nat-logging]
   which provides</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">enable</font></strong> the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">templates</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">logging feature.  Nevertheless, configuration parameters specific</font></strong> to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">log</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">logging protocols are out of</font></strong> the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">destination ports.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">scope of this document.</font></strong>

2.2.  Various <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Translation</font></strong> Flavors

   The following <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">translation</font></strong> modes are supported:

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">1.</font></strike>

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Basic NAT44
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">2.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  NAPT
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">3.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Destination NAT
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">4.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Port-restricted NAT
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">5.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Stateful and stateless NAT64
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">6.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o  CLAT
   o</font></strong>  EAM SIIT
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">7.   CLAT
   8.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  NPTv6
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">9.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Combination of Basic NAT/NAPT and Destination NAT
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">10.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Combination of port-restricted and Destination NAT
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">11.</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">o</font></strong>  Combination of NAT64 and EAM

   [I-D.ietf-softwire-dslite-yang] specifies an extension to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">support DS-
   Lite.

2.3.  TCP, UDP and ICMP NAT Behavioral Requirements

   This document assumes [RFC4787][RFC5382][RFC5508] are enabled by
   default.

   Furthermore,</font></strike> the NAT
   YANG module <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">relies upon the recommendations
   detailed in [RFC6888] and [RFC7857].

2.4.  Other Transport Protocols

   The module is structured</font></strike> to support <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">other protocols than UDP, TCP,
   and ICMP.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">DS-Lite.</font></strong>

   The <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mapping table</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">YANG "feature" statement</font></strong> is <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">designed so that it can indicate any
   transport protocol.  For example, this module may be</font></strike> used to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">manage</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">indicate which of the
   different translation mode is relevant for</font></strong> a
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">DCCP-capable</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">specific configuration.
   The following features are defined:

   o  Basic NAT44 (basic-nat44)
   o  NAPT (napt44)
   o  Destination</font></strong> NAT <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">that adheres to [RFC5597].

   Future extensions can be defined</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">(dst-nat)
   o  NAT64 (nat64)
   o  CLAT (clat)
   o  EAM SIIT (eam)
   o  NPTv6 (nptv6)

   The following translation modes do not require defining dedicated
   features:

   o  Port-restricted NAT: This mode corresponds</font></strong> to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">cover NAT-related considerations
   that are specific</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">supplying port
      restriction policies</font></strong> to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">other transport protocols such as</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">a NAPT or NAT64 (port-set-restrict).
   o  Stateless NAT64: This mode corresponds to setting 'stateless-
      enable' parameter for a NAT64.
   o  Combination of Basic NAT/NAPT and Destination NAT: This mode
      corresponds to setting 'dst-nat-enable' for Basic NAT44 or NAPT.

   o  Combination of port-restricted and Destination NAT: This mode can
      be achieved by configuring a NAPT with port restriction policies
      (port-set-restrict) together with a destination IP address pool
      (dst-ip-address-pool).
   o  Combination of NAT64 and EAM: This mode corresponds to configuring
      static mappings for NAT64.

2.3.  TCP, UDP and ICMP NAT Behavioral Requirements

   This document assumes [RFC4787][RFC5382][RFC5508] are enabled by
   default.

   Furthermore, the NAT YANG module relies upon the recommendations
   detailed in [RFC6888] and [RFC7857].

2.4.  Other Transport Protocols

   The module is structured to support other protocols than UDP, TCP,
   and ICMP.  The mapping table is designed so that it can indicate any
   transport protocol.  For example, this module may be used to manage a
   DCCP-capable NAT that adheres to [RFC5597].

   Future extensions can be defined to cover NAT-related considerations
   that are specific to other transport protocols such as</font></strong> SCTP
   [I-D.ietf-tsvwg-natsupp].  Typically, the mapping entry can be
   extended to record two optional SCTP-specific parameters: Internal
   Verification Tag (Int-VTag) and External Verification Tag (Ext-VTag).

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Also, the module allows to enable translation for these protocols
   when required (/nat/instances/instance/policy/transport-protocols).</font></strong>

2.5.  IP Addresses Used for Translation

   The NAT YANG module assumes that blocks of IP external addresses
   (external-ip-address-pool) can be provisioned to the NAT function.
   These blocks may be contiguous or not.

   This behavior is aligned with [RFC6888] which specifies that a NAT
   function should not have any limitations on the size or the
   contiguity of the external address pool.  In particular, the NAT
   function must be configurable with contiguous or non-contiguous
   external IPv4 address ranges.

   Likewise, one or multiple IP address pools may be configured for
   Destination NAT (dst-ip-address-pool).

2.6.  Port Set Assignment

   Port numbers can be assigned by a NAT individually (that is, a single
   port is a assigned on a per session basis).  Nevertheless, this port
   allocation scheme may not be optimal for logging purposes.
   Therefore, a NAT function should be able to assign port sets (e.g.,
   [RFC7753]) to optimize the volume of the logging data (REQ-14 of
   [RFC6888]).  Both features are supported in the NAT YANG module.

   When port set assignment is activated (i.e., port-allocation-
   type==port-range-allocation), the NAT can be provided with the size
   of the port set to be assigned (port-set-size).

2.7.  Port-Restricted IP Addresses

   Some NATs require to restrict the port numbers (e.g., Lightweight
   4over6 [RFC7596], MAP-E [RFC7597]).  Two schemes of port set
   assignments (port-set-restrict) are supported in this document:

   o  Simple port range: is defined by two port values, the start and
      the end of the port range [RFC8045].

   o  Algorithmic: an algorithm is defined in [RFC7597] to characterize
      the set of ports that can be used.

2.8.  NAT Mapping Entries

   A TCP/UDP mapping entry maintains an association between the
   following information:

      (internal-src-address, internal-src-port) (internal-dst-address,
      internal-dst-port) &lt;=&gt; (external-src-address, external-src-port)
      (external-dst-address, external-dst-port)

   An ICMP mapping entry maintains an association between the following
   information:

      (internal-src-address, internal-dst-address, internal ICMP/ICMPv6
      identifier) &lt;=&gt; (external-src-address, external-dst-address,
      external ICMP/ICMPv6 identifier)

   To cover TCP, UDP, and ICMP, the NAT YANG module assumes the
   following structure of a mapping entry:

   type:   Indicates how the mapping was instantiated.  For example, it
      may indicate whether a mapping is dynamically instantiated by a
      packet or statically configured.

   transport-protocol:  Indicates the transport protocol (e.g., UDP,
      TCP, ICMP) of a given mapping.

   internal-src-address:  Indicates the source IP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">address</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address/prefix</font></strong> as used
      by an internal host.

   internal-src-port:  Indicates the source port number (or ICMP
      identifier) as used by an internal host.

   external-src-address:   Indicates the source IP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">address</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address/prefix</font></strong> as
      assigned by the NAT.

   external-src-port:   Indicates the source port number (or ICMP
      identifier) as assigned by the NAT.

   internal-dst-address:  Indicates the destination IP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">address</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address/prefix</font></strong> as
      used by an internal host when sending a packet to a remote host.

   internal-dst-port:   Indicates the destination <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">IP address</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">port number</font></strong> as used by
      an internal host when sending a packet to a remote host.

   external-dst-address:  Indicates the destination IP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">address</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address/prefix</font></strong>
      used by a NAT when processing a packet issued by an internal host
      towards a remote host.

   external-dst-port:   Indicates the destination port number used by a
      NAT when processing a packet issued by an internal host towards a
      remote host.

   In order to cover both NAT64 and NAT44 flavors in particular, the NAT
   mapping structure allows to include an IPv4 or an IPv6 address as an
   internal IP address.  Remaining fields are common to both NAT
   schemes.

   For example, the mapping that will be created by a NAT64 upon receipt
   of a TCP SYN from source address 2001:db8:aaaa::1 and source port
   number 25636 to destination IP address 2001:db8:1234::198.51.100.1
   and destination port number 8080 is characterized as follows:

   o  type: dynamic implicit mapping.
   o  transport-protocol: TCP (6)
   o  internal-src-address: 2001:db8:aaaa::1
   o  internal-src-port: 25636
   o  external-src-address: T (an IPv4 address configured on the NAT64)
   o  external-src-port: t (a port number that is chosen by the NAT64)
   o  internal-dst-address: 2001:db8:1234::198.51.100.1
   o  internal-dst-port: 8080
   o  external-dst-address: 198.51.100.1
   o  external-dst-port: 8080

   The mapping that will be created by a NAT44 upon receipt of an ICMP
   request from source address 198.51.100.1 and ICMP identifier (ID1) to
   destination IP address 198.51.100.11 is characterized as follows:

   o  type: dynamic implicit mapping.
   o  transport-protocol: ICMP (1)
   o  internal-src-address: 198.51.100.1
   o  internal-src-port: ID1
   o  external-src-address: T (an IPv4 address configured on the NAT44)
   o  external-src-port: ID2 (an ICMP identifier that is chosen by the
      NAT44)
   o  internal-dst-address: 198.51.100.11

   The mapping that will be created by a NAT64 upon receipt of an ICMP
   request from source address 2001:db8:aaaa::1 and ICMP identifier
   (ID1) to destination IP address 2001:db8:1234::198.51.100.1 is
   characterized as follows:

   o  type: dynamic implicit mapping.
   o  transport-protocol: ICMPv6 (58)
   o  internal-src-address: 2001:db8:aaaa::1
   o  internal-src-port: ID1
   o  external-src-address: T (an IPv4 address configured on the NAT64)
   o  external-src-port: ID2 (an ICMP identifier that is chosen by the
      NAT64)
   o  internal-dst-address: 2001:db8:1234::198.51.100.1
   o  external-dst-address: 198.51.100.1

   Note that a mapping table is maintained only for stateful NAT
   functions.  Particularly:

   o  No mapping table is maintained for NPTv6 given that it is
      stateless and transport-agnostic.

   o  The double translations are stateless in CLAT if a dedicated IPv6
      prefix is provided for CLAT.  If not, a stateful NAT44 will be
      required.

   o  No per-flow mapping is maintained for EAM [RFC7757].

   o  No mapping table is maintained for stateless NAT64.  As a
      reminder, in such deployments internal IPv6 nodes are addressed
      using IPv4-translatable IPv6 addresses, which enable them to be
      accessed by IPv4 nodes [RFC6052].

2.9.  Resource Limits

   In order to comply with CGN deployments in particular, the NAT YANG
   module allows limiting the number of external ports per subscriber
   (port-quota) and the amount of state memory allocated per mapping and
   per subscriber (mapping-limit and connection-limit).  According to
   [RFC6888], the model allows for the following:

   o  Per-subscriber limits are configurable by the NAT administrator.

   o  Per-subscriber limits are configurable independently per transport
      protocol.

   o  Administrator-adjustable thresholds to prevent a single subscriber
      from consuming excessive CPU resources from the NAT (e.g., rate-
      limit the subscriber's creation of new mappings) can be
      configured.

2.10.  Binding the NAT Function to an External Interface <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">or VRF</font></strike>

   The model <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">allows</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">is designed</font></strong> to specify <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">the interface or Virtual Routing and
   Forwarding (VRF) instance</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">an external realm</font></strong> on which the NAT
   function must be applied (external-realm).  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">The module supports
   indicating an interface as an external realm, but the module is
   extensible so that other choices can be indicated in the future
   (e.g., Virtual Routing and Forwarding (VRF) instance).</font></strong>

   Distinct <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">interfaces/VRFs</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">external realms</font></strong> can be provided as a function of the NAT
   policy (see for example, Section 4 of [RFC7289]).

   If no external <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">interface/VRF</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">realm</font></strong> is provided, this assumes that the system is
   able to determine the external <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">interface/VRF instance</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">interface (VRF instance, etc.)</font></strong> on
   which the NAT will be applied.  Typically, the WAN and LAN interfaces
   of a CPE <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">is</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">are</font></strong> determined by the CPE.

2.11.  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Tree Structure

   The tree structure</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Relationship to NATV2-MIB

   Section of 5.1</font></strong> of <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">[RFC7659] indicates that</font></strong> the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT YANG module is</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">NATV2-MIB assumes that
   the following information is configured on the NAT by some means, not
   specified in [RFC7659]:

   o  The set of address realms to which the device connect.

   o  For the CGN case, per-subscriber information including subscriber
      index, address realm, assigned prefix or address, and (possibly)
      policies regarding address pool selection in the various possible
      address realms to which the subscriber may connect.

   o  The set of NAT instances running on the device, identified by NAT
      instance index and name.

   o  The port mapping, filtering, pooling, and fragment behavior for
      each NAT instance.

   o  The set of protocols supported by each NAT instance.

   o  Address pools for each NAT instance, including for each pool the
      pool index, address realm, address type, minimum and maximum port
      number, the address ranges assigned to that pool, and policies for
      access to that pool's resources.

   o  Static address and port mapping entries.

   All the above parameters can be configured by means of the NAT YANG
   module.

   Unlike the NATV2-MIB, the NAT YANG module allows to configure
   multiple policies per NAT instance.

2.12.  Tree Structure

   The tree structure of the NAT YANG module is</font></strong> provided below:

module: ietf-nat
    +--rw nat
       +--rw instances
          +--rw instance* [id]
             +--rw id                     uint32
             +--rw name?                  string
             +--rw enable?                boolean
             <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>
             <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> capabilities
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> nat-flavor*                                   identityref
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw nat44-flavor*                                 identityref
             |  +--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> restricted-port-support?                      boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> static-mapping-support?                       boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> port-randomization-support?                   boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> port-range-allocation-support?                boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> port-preservation-suport?                     boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> port-parity-preservation-support?             boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> address-roundrobin-support?                   boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> paired-address-pooling-support?               boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> endpoint-independent-mapping-support?         boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> address-dependent-mapping-support?            boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> address-and-port-dependent-mapping-support?   boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> endpoint-independent-filtering-support?       boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> address-dependent-filtering?                  boolean
             |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+--ro</font></strong> address-and-port-dependent-filtering?         boolean
             <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|  +--ro fragment-behavior?                            enumeration</font></strong>
             +--rw nat-pass-through* [id] <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{basic-nat44 or napt44 or dst-nat}?</font></strong>
             |  +--rw id        uint32
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">prefix?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">prefix</font></strong>    inet:ip-prefix
             |  +--rw port?     inet:port-number
             +--rw policy* [id]
             |  +--rw id                          uint32
             |  +--rw clat-parameters <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{clat}?</font></strong>
             |  |  +--rw clat-ipv6-prefixes* [ipv6-prefix]
             |  |  |  +--rw ipv6-prefix    inet:ipv6-prefix
             |  |  +--rw ipv4-prefixes* [ipv4-prefix]
             |  |     +--rw ipv4-prefix    inet:ipv4-prefix
             |  +--rw nptv6-prefixes* <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">[translation-id]
             |  |  +--rw translation-id          uint32</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">[internal-ipv6-prefix] {nptv6}?</font></strong>
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">internal-ipv6-prefix?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">internal-ipv6-prefix</font></strong>    inet:ipv6-prefix
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">external-ipv6-prefix?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">external-ipv6-prefix</font></strong>    inet:ipv6-prefix
             |  +--rw eam* [ipv4-prefix] <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{eam}?</font></strong>
             |  |  +--rw ipv4-prefix    inet:ipv4-prefix
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ipv6-prefix?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">ipv6-prefix</font></strong>    inet:ipv6-prefix
             |  +--rw nat64-prefixes* [nat64-prefix] <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{nat64 or clat}?</font></strong>
             |  |  +--rw nat64-prefix               inet:ipv6-prefix
             |  |  +--rw destination-ipv4-prefix* [ipv4-prefix]
             |  |  |  +--rw ipv4-prefix    inet:ipv4-prefix
             |  |  +--rw stateless-enable?          boolean
             |  +--rw external-ip-address-pool* [pool-id] <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{basic-nat44 or napt44 or nat64}?</font></strong>
             |  |  +--rw pool-id             uint32
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">external-ip-pool?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">external-ip-pool</font></strong>    inet:ipv4-prefix
             |  +--rw port-set-restrict <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
             |  |  +--rw (port-type)?
             |  |     +--:(port-range)
             |  |     |  +--rw start-port-number?   inet:port-number
             |  |     |  +--rw end-port-number?     inet:port-number
             |  |     +--:(port-set-algo)
             |  |        +--rw psid-offset?         uint8
             |  |        +--rw psid-len             uint8
             |  |        +--rw psid                 uint16
             |  +--rw dst-nat-enable?             boolean <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{basic-nat44 or napt44}?</font></strong>
             |  +--rw dst-ip-address-pool* [pool-id] <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{dst-nat}?</font></strong>
             |  |  +--rw pool-id            uint32
             |  |  +--rw dst-in-ip-pool?    inet:ip-prefix
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">dst-out-ip-pool?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dst-out-ip-pool</font></strong>    inet:ip-prefix
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">supported-transport-protocols* [transport-protocol-id]</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">transport-protocols* [protocol-id] {napt44 or nat64 or dst-nat}?</font></strong>
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport-protocol-id</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id</font></strong>      uint8
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport-protocol-name?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-name?</font></strong>   string
             |  +--rw subscriber-mask-v6?         uint8
             |  +--rw subscriber-match* <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">[sub-match-id]</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">[match-id] {basic-nat44 or napt44 or dst-nat}?</font></strong>
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sub-match-id</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">match-id</font></strong>    uint32
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sub-mask</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">subnet</font></strong>      inet:ip-prefix
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">paired-address-pooling?          boolean</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address-allocation-type?    enumeration
             |  +--rw port-allocation-type?       enumeration {napt44 or nat64}?</font></strong>
             |  +--rw mapping-type?               enumeration <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
             |  +--rw filtering-type?             enumeration <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?
             |  +--rw fragment-behavior?          enumeration {napt44 or nat64}?</font></strong>
             |  +--rw port-quota* [quota-type] <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
             |  |  +--rw port-limit?   uint16
             |  |  +--rw quota-type    uint8
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">port-allocation-type?            enumeration
             |  +--rw address-roundrobin-enable?       boolean
             |  +--rw</font></strike> port-set <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">port-set-size?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">port-set-size</font></strong>       uint16
             |  |  +--rw port-set-timeout?   uint32
             |  +--rw timers <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
             |  |  +--rw udp-timeout?               uint32
             |  |  +--rw tcp-idle-timeout?          uint32
             |  |  +--rw tcp-trans-open-timeout?    uint32
             |  |  +--rw tcp-trans-close-timeout?   uint32
             |  |  +--rw tcp-in-syn-timeout?        uint32
             |  |  +--rw fragment-min-timeout?      uint32
             |  |  +--rw icmp-timeout?              uint32
             |  |  +--rw per-port-timeout* [port-number]
             |  |  |  +--rw port-number    inet:port-number
             |  |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">port-timeout</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">timeout</font></strong>        uint32
             |  |  +--rw hold-down-timeout?         uint32
             |  |  +--rw hold-down-max?             uint32
             |  +--rw <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">fragment-limit?             uint32
             |  +--rw</font></strong> algs* [name]
             |  |  +--rw name                  string
             |  |  +--rw transport-protocol?   uint32
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport-port?       inet:port-number</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dst-transport-port</font></strong>
             |  |  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">+--rw status?               boolean</font></strike>  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">all-algs-enable?                 boolean</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">start-port-number?   inet:port-number
             |  |</font></strong>  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">notify-pool-usage</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">end-port-number?     inet:port-number
             |  |  +--rw src-transport-port
             |  |  |  +--rw start-port-number?   inet:port-number
             |  |  |  +--rw end-port-number?     inet:port-number
             |  |  +--rw status?               boolean
             |  +--rw all-algs-enable?            boolean
             |  +--rw notify-pool-usage {basic-nat44 or napt44 or nat64}?</font></strong>
             |  |  +--rw pool-id?           uint32
             |  |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">high-threshold</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">high-threshold?</font></strong>    percent
             |  |  +--rw low-threshold?     percent
             |  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|  +--rw notify-interval?   uint32
             |</font></strong>  +--rw external-realm
             |     +--rw (realm-type)?
             |        +--:(interface)
             |        <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">|</font></strike>           +--rw external-interface?   if:interface-ref
             <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">|        +--:(vrf)
             |           +--rw external-vrf-instance?   identityref</font></strike>
             +--rw mapping-limit <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-subscriber?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-subscribers?</font></strong>       uint32
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-vrf?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-address-mapings?</font></strong>   uint32
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-instance</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-port-mappings?</font></strong>     uint32
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-udp           uint32</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-per-protocol* [protocol-id] {napt44 or nat64 or dst-nat}?</font></strong>
             |     +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-tcp           uint32</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id    uint8</font></strong>
             |     +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-icmp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit?</font></strong>         uint32
             +--rw connection-limit <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{basic-nat44 or napt44 or nat64}?</font></strong>
             |  +--rw limit-per-subscriber?   uint32
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-vrf?          uint32
             |  +--rw</font></strike> limit-per-instance      uint32
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-udp           uint32</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-per-protocol* [protocol-id] {napt44 or nat64}?</font></strong>
             |     +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-tcp           uint32</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id    uint8</font></strong>
             |     +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-icmp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit?</font></strong>         uint32
             +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">logging-info
             |  +--rw logging-enable?        boolean
             |  +--rw destination-address    inet:ip-prefix
             |  +--rw destination-port       inet:port-number</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notification-limits</font></strong>
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">(protocol)?
             |     +--:(syslog)
             |</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notify-interval?          uint32 {basic-nat44 or napt44 or nat64}?</font></strong>
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">syslog?                boolean
             |     +--:(ipfix)
             |</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notify-addresses-usage?   percent {basic-nat44 or napt44 or nat64}?</font></strong>
             |  +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ipfix?                 boolean
             |     +--:(ftp)
             |</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notify-ports-usage?       percent {napt44 or nat64}?</font></strong>
             +--rw <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ftp?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">logging-enable?</font></strong>        boolean <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{basic-nat44 or napt44 or nat64}?</font></strong>
             +--rw mapping-table <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{basic-nat44 or napt44 or nat64 or clat or dst-nat}?</font></strong>
             |  +--rw mapping-entry* [index]
             |     +--rw index                   uint32
             |     +--rw type?                   enumeration
             |     +--rw transport-protocol?     uint8
             |     +--rw internal-src-address?   inet:ip-prefix
             |     +--rw internal-src-port
             |     |  +--rw start-port-number?   inet:port-number
             |     |  +--rw end-port-number?     inet:port-number
             |     +--rw external-src-address?   inet:ip-prefix
             |     +--rw external-src-port
             |     |  +--rw start-port-number?   inet:port-number
             |     |  +--rw end-port-number?     inet:port-number
             |     +--rw internal-dst-address?   inet:ip-prefix
             |     +--rw internal-dst-port
             |     |  +--rw start-port-number?   inet:port-number
             |     |  +--rw end-port-number?     inet:port-number
             |     +--rw external-dst-address?   inet:ip-prefix
             |     +--rw external-dst-port
             |     |  +--rw start-port-number?   inet:port-number
             |     |  +--rw end-port-number?     inet:port-number
             |     +--rw lifetime?               uint32
             +--ro statistics
                +--ro <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">discontinuity-time    yang:date-and-time
                +--ro</font></strong> traffic-statistics
                |  +--ro sent-packets?                    yang:zero-based-counter64
                |  +--ro sent-bytes?                      yang:zero-based-counter64
                |  +--ro rcvd-packets?                    yang:zero-based-counter64
                |  +--ro rcvd-bytes?                      yang:zero-based-counter64
                |  +--ro dropped-packets?                 yang:zero-based-counter64
                |  +--ro dropped-bytes?                   yang:zero-based-counter64
                <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|  +--ro dropped-fragments?               yang:zero-based-counter64 {napt44 or nat64}?
                |  +--ro dropped-address-limit-packets?   yang:zero-based-counter64 {basic-nat44 or napt44 or nat64}?
                |  +--ro dropped-address-limit-bytes?     yang:zero-based-counter64 {basic-nat44 or napt44 or nat64}?
                |  +--ro dropped-address-packets?         yang:zero-based-counter64 {basic-nat44 or napt44 or nat64}?
                |  +--ro dropped-address-bytes?           yang:zero-based-counter64 {basic-nat44 or napt44 or nat64}?
                |  +--ro dropped-port-limit-packets?      yang:zero-based-counter64 {napt44 or nat64}?
                |  +--ro dropped-port-limit-bytes?        yang:zero-based-counter64 {napt44 or nat64}?
                |  +--ro dropped-port-packets?            yang:zero-based-counter64 {napt44 or nat64}?
                |  +--ro dropped-port-bytes?              yang:zero-based-counter64 {napt44 or nat64}?
                |  +--ro dropped-subscriber-packets?      yang:zero-based-counter64 {basic-nat44 or napt44 or nat64}?
                |  +--ro dropped-subscriber-bytes?        yang:zero-based-counter64 {basic-nat44 or napt44 or nat64}?</font></strong>
                +--ro mapping-statistics
                |  +--ro <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">total-mappings?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">total-address-mappings?   yang:gauge32 {basic-nat44 or napt44 or nat64 or clat or dst-nat}?
                |  +--ro total-port-mappings?</font></strong>      yang:gauge32 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
                |  +--ro total-tcp-mappings?       yang:gauge32 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
                |  +--ro total-udp-mappings?       yang:gauge32 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
                |  +--ro total-icmp-mappings?      yang:gauge32 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
                +--ro <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">pool-stats</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">pools-stats {basic-nat44 or napt44 or nat64}?</font></strong>
                   +--ro <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">pool-id?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">addresses-allocated?   yang:gauge32
                   +--ro addresses-free?        yang:gauge32
                   +--ro ports-stats {napt44 or nat64}?
                   |  +--ro ports-allocated?   yang:gauge32
                   |  +--ro ports-free?        yang:gauge32
                   +--ro per-pool-stats* [pool-id] {basic-nat44 or napt44 or nat64}?
                      +--ro pool-id</font></strong>               uint32
                      +--ro <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">discontinuity-time    yang:date-and-time
                      +--ro pool-stats
                      |  +--ro</font></strong> addresses-allocated?   yang:gauge32
                      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|</font></strong>  +--ro addresses-free?        yang:gauge32
                      +--ro port-stats <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">{napt44 or nat64}?</font></strong>
                         +--ro ports-allocated?   yang:gauge32
                         +--ro ports-free?        yang:gauge32

  notifications:
    +---n <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">nat-event</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">nat-pool-event {basic-nat44 or napt44 or nat64}?
    |</font></strong>  +--ro <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">id?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">id</font></strong>                       -&gt; /nat/instances/instance/id
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|</font></strong>  +--ro policy-id?               -&gt; /nat/instances/instance/policy/id
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|</font></strong>  +--ro <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">pool-id?</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">pool-id</font></strong>                  -&gt; /nat/instances/instance/policy/external-ip-address-pool/pool-id
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">|</font></strong>  +--ro notify-pool-threshold    percent
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">+---n nat-instance-event {basic-nat44 or napt44 or nat64}?
       +--ro id                            -&gt; /nat/instances/instance/id
       +--ro notify-addresses-threshold?   percent
       +--ro notify-ports-threshold?       percent</font></strong>

3.  NAT YANG Module

&lt;CODE BEGINS&gt; file <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"ietf-nat@2017-10-30.yang"</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"ietf-nat@2017-11-13.yang"</font></strong>

module ietf-nat {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-nat";
  //namespace to be assigned by IANA
  prefix "nat";

  import ietf-inet-types { prefix inet; }
  import ietf-yang-types { prefix yang; }
  import ietf-interfaces { prefix if; }

  organization
    "IETF OPSAWG (Operations and Management Area Working Group)";

  contact

    "WG Web:   &lt;https://datatracker.ietf.org/wg/opsawg/&gt;
     WG List:  &lt;mailto:opsawg@ietf.org&gt;

     WG Chair: Ignas Bagdonas
               &lt;mailto:ibagdona@gmail.com&gt;

     WG Chair: Joe Clarke
               &lt;mailto:jclarke@cisco.com&gt;

     WG Chair: Tianran Zhou
               &lt;mailto:zhoutianran@huawei.com&gt;

     Editor:  Mohamed Boucadair
              &lt;mailto:mohamed.boucadair@orange.com&gt;

     Editor:  Senthil Sivakumar
              &lt;mailto:ssenthil@cisco.com&gt;

     Editor:  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Chritsian</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Christian</font></strong> Jacquenet
              &lt;mailto:christian.jacquenet@orange.com&gt;

     Editor:  Suresh Vinapamula
              &lt;mailto:sureshk@juniper.net&gt;

     Editor:  Qin Wu
              &lt;mailto:bill.wu@huawei.com&gt;";

  description
    "This module is a YANG module for NAT implementations
     (including NAT44 and NAT64 flavors).

     Copyright (c) 2017 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (http://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX; see
     the RFC itself for full legal notices.";

  revision <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">2017-10-30</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">2017-11-13</font></strong> {
    description
      "Initial revision.";
    reference
      "RFC XXXX: A YANG Data Model for Network Address Translation
                 (NAT) and Network Prefix Translation (NPT)";
  }

  /*
   * Definitions
   */

  typedef percent {
    type uint8 {
      range "0 .. 100";
    }
    description
      "Percentage";
  }

  /*
   * <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Identities</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Features</font></strong>
   */

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity nat-type {
    description
      "Base identity for nat type.";
  }

  identity nat44 {
    base nat:nat-type;</font></strike>

  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature basic-nat44{</font></strong>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity for traditional NAT support.";
    reference
      "RFC 3022: Traditional</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Basic NAT44 translation is limited to</font></strong> IP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Network Address Translator
                 (Traditional NAT)";
  }

  identity basic-nat {
    base nat:nat44;
    description
      "Identity for Basic NAT support.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">addresses alone.";</font></strong>
    reference
      "RFC 3022: Traditional IP Network Address Translator
                 (Traditional NAT)";
  }

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity napt</font></strike>

  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature napt44</font></strong> {
    <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">base nat:nat44;</font></strike>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity for NAPT support.";</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Network Address/Port Translator (NAPT): translation is
      extended to include IP addresses and transport identifiers
      (such as a TCP/UDP port or ICMP query ID).";</font></strong>
    reference
      "RFC 3022: Traditional IP Network Address Translator
                 (Traditional NAT)";

  }

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity</font></strike>

 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature</font></strong> dst-nat {
    <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">base nat:nat-type;</font></strike>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity for Destination</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Destination</font></strong> NAT <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">support.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">is a translation that acts on the destination
       IP address and/or destination port number. This flavor is
       usually deployed in load balancers or at devices
       in front of public servers.";</font></strong>
  }

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity</font></strike>

  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature</font></strong> nat64 {
    <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">base nat:nat-type;</font></strike>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity for</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"NAT64 translation allows IPv6-only clients to contact IPv4
       servers using unicast UDP, TCP, or   ICMP.  One or more
       public IPv4 addresses assigned to a</font></strong> NAT64 <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">support.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">translator are
       shared among several IPv6-only clients.";</font></strong>
    reference
      "RFC 6146: Stateful NAT64: Network Address and Protocol
                 Translation from IPv6 Clients to IPv4 Servers";
  }

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity</font></strike>

  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature</font></strong> clat {
    <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">base nat:nat-type;</font></strike>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"CLAT is customer-side translator that algorithmically
       translates 1:1 private IPv4 addresses to global IPv6 addresses,
       and vice versa.

       When a dedicated /64 prefix is not available</font></strong> for <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">translation from
       DHCPv6-PD, the</font></strong> CLAT <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">support.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">may perform NAT44 for all IPv4 LAN packets so
       that all the LAN-originated IPv4 packets appear from a single
       IPv4 address and are then statelessly translated to one interface
       IPv6 address that is claimed by the CLAT via the Neighbor
       Discovery Protocol (NDP) and defended with Duplicate Address
       Detection.";</font></strong>
    reference
      "RFC 6877: 464XLAT: Combination of Stateful and Stateless
                 Translation";
  }
  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity</font></strike>

  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature</font></strong> eam {
    <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">base nat:nat-type;</font></strike>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity for EAM support.";</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Explicit Address Mapping (EAM) is a bidirectional coupling between
       an IPv4 address and an IPv6 address.";</font></strong>
    reference
     "RFC 7757: Explicit Address Mappings for Stateless IP/ICMP
                Translation";
  }

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity</font></strike>
  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">feature</font></strong> nptv6 {
    <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">base nat:nat-type;</font></strike>
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Identity for NPTv6 support.";</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"NPTv6 is a stateless transport-agnostic IPv6-to-IPv6
       prefix translation.";</font></strong>
    reference
      "RFC 6296: IPv6-to-IPv6 Network Prefix Translation";
  }

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identity vrf-routing-instance {
    description
      "This identity represents a VRF routing instance.";
    reference
      "Section 8.9 of RFC 4026.";
  }</font></strike>

  /*
   * <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Grouping</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Identities</font></strong>
   */

  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">grouping port-number</font></strike>

  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">identity nat-type</font></strong> {
    description
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Individual port or a range of ports.
       When only start-port-number is present,
       it represents a single port.";

    leaf start-port-number</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Base identity for nat type.";
  }

  identity basic-nat44</font></strong> {
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">type inet:port-number;</font></strike>
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">base nat:nat-type;</font></strong>
    description
        <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Begining of the port range.";</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Identity for Basic NAT support.";</font></strong>
    reference
        <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Section 3.2.9 of RFC</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"RFC 3022: Traditional IP Network Address Translator
                 (Traditional NAT)";
  }

  identity napt44 {
    base nat:nat-type;
    description
      "Identity for NAPT support.";
    reference
      "RFC 3022: Traditional IP Network Address Translator
                 (Traditional NAT)";
  }

  identity dst-nat {
    base nat:nat-type;
    description
      "Identity for Destination NAT support.";
  }

  identity nat64 {
    base nat:nat-type;
    description
      "Identity for NAT64 support.";
    reference
      "RFC 6146: Stateful NAT64: Network Address and Protocol
                 Translation from IPv6 Clients to IPv4 Servers";

  }

  identity clat {
    base nat:nat-type;
    description
      "Identity for CLAT support.";
    reference
      "RFC 6877: 464XLAT: Combination of Stateful and Stateless
                 Translation";
  }

  identity eam {
    base nat:nat-type;
    description
      "Identity for EAM support.";
    reference
     "RFC 7757: Explicit Address Mappings for Stateless IP/ICMP
                Translation";
  }

  identity nptv6 {
    base nat:nat-type;
    description
      "Identity for NPTv6 support.";
    reference
      "RFC 6296: IPv6-to-IPv6 Network Prefix Translation";
  }

 /*
  * Grouping
  */

  grouping port-number {
    description
      "Individual port or a range of ports.
       When only start-port-number is present,
       it represents a single port.";

    leaf start-port-number {
      type inet:port-number;
      description
        "Begining of the port range.";
      reference
        "Section 3.2.9 of RFC</font></strong> 8045.";
    }

    leaf end-port-number {
      type inet:port-number;
      must ". &gt;= ../start-port-number"
        {
          error-message
            "The end-port-number must be greater than or
             equal to start-port-number.";
        }
      description
        "End of the port range.";
      reference
        "Section 3.2.10 of RFC 8045.";
    }
  }

  grouping port-set {
    description
      "Indicates a set of ports.

       It may be a simple port range, or use the Port Set ID (PSID)
       algorithm to represent a range of transport layer
       ports which will be used by a NAPT.";

    choice port-type {
      default port-range;
      description
        "Port type: port-range or port-set-algo.";
      case port-range {
         uses port-number;
       }

      case port-set-algo {
        leaf psid-offset {
          type uint8 {
            range 0..15;
          }

          description
            "The number of offset bits (a.k.a., 'a' bits).

             Specifies the numeric value for the excluded port
             range/offset bits.

             Allowed values are between 0 and 15 ";

          reference
            "Section 5.1 of RFC 7597";
        }

        leaf psid-len {
          type uint8 {
             range 0..15;
          }
          mandatory true;

         description
           "The length of PSID, representing the sharing
            ratio for an IPv4 address.

            (also known as 'k').

            The address-sharing ratio would be 2^k.";
          reference
            "Section 5.1 of RFC 7597";
        }

        leaf psid {
          type uint16;
          mandatory true;
          description
            "Port Set Identifier (PSID) value, which
             identifies a set of ports algorithmically.";
          reference
            "Section 5.1 of RFC 7597";
        }
      }
      reference
        "Section 7597: Mapping of Address and Port with
                       Encapsulation (MAP-E)";
    }
  }

  grouping mapping-entry {
    description
      "NAT mapping entry.";

    leaf index {
      type uint32;
      description
        "A unique identifier of a mapping <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">entry.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">entry. This identifier can be
         automatically assigned by the NAT instance or be explicitely
         configured.";</font></strong>
    }

    leaf type {
      type enumeration {
        enum "static"  {
          description
            "The mapping entry is explicitly <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">configrued</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">configured</font></strong>
             (e.g., via command-line interface).";
        }

        enum "dynamic-implicit" {
          description
            "This mapping is created implicitely as a side effect
             of processing a packet that requires a new mapping.";

        }

        enum "dynamic-explicit" {
          description
            "This mapping is created as a result of an explicit
             request, e.g., a PCP message.";

        }
      }
        description
          "Indicates the type of a mapping entry. E.g.,
           a mapping can be: static, implicit dynamic
           or explicit dynamic.";
    }

    leaf transport-protocol {
      type uint8;
      description
        "Upper-layer protocol associated with this mapping.
         Values are taken from the IANA protocol registry.
         For example, this field contains 6 (TCP) for a TCP
         mapping or 17 (UDP) for a UDP mapping.

         If this leaf is not instantiated, then the mapping
         applies to any protocol.";
    }

    leaf internal-src-address {
      type inet:ip-prefix;
      description
        "Corresponds to the source IPv4/IPv6 address/prefix
         of the packet received on an internal
         interface.";
    }

    container internal-src-port {
      description
        "Corresponds to the source port of the packet received
         on an internal interface.

         It is used also to indicate the internal source ICMP
         identifier.

         As a reminder, all the ICMP Query messages contain
         an 'Identifier' field, which is referred to in this
         document as the 'ICMP Identifier'.";

       uses port-number;
    }

    leaf external-src-address {
      type inet:ip-prefix;
      description
        "Source IP address/prefix of the packet sent on an
         external interface of the NAT.";
    }

    container external-src-port {
      description
        "Source port of the packet sent on an external interafce
         of the NAT.

         It is used also to indicate the external source ICMP
         identifier.";

      uses port-number;
    }

    leaf internal-dst-address {
      type inet:ip-prefix;
      description
        "Corresponds to the destination IP address/prefix
         of the packet received on an internal interface
         of the NAT.

         For example, some NAT implementations support
         the translation of both source and destination
         addresses and ports, sometimes referred to
         as 'Twice NAT'.";
      }

    container internal-dst-port {
      description
        "Corresponds to the destination port of the
         IP packet received on the internal interface.

         It is used also to include the internal
         destination ICMP identifier.";

      uses port-number;
    }

    leaf external-dst-address {
      type inet:ip-prefix;
      description
        "Corresponds to the destination IP address/prefix
         of the packet sent on an external interface
         of the NAT.";
    }

    container external-dst-port {
      description
        "Corresponds to the destination port number of
         the packet sent on the external interface
         of the NAT.

         It is used also to include the external
         destination ICMP identifier.";

      uses port-number;
    }

    leaf lifetime {
      type uint32;
      units "seconds";
      description
        "When specified, it is used to track the connection that is
         fully-formed (e.g., once the three-way handshake
         TCP is completed) or the duration for maintaining
         an explicit mapping alive. The mapping entry will be
         removed by the NAT instance once this lifetime is expired.

         When reported in a get operation, the lifetime indicates
         the remaining validity lifetime.

         Static mappings may not be associated with a
         lifetime. If no lifetime is associated with a
         static mapping, an explicit action is requried to
         remove that mapping.";
    }
  }

 /*
  * NAT Module
  */

  container nat {
    description
      "NAT module";

    container instances {
      description
        "NAT instances";

    list instance {
      key "id";

      description
        "A NAT <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">instance.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">instance. This identifier can be automatically assigned
         or explicitely configured.";</font></strong>

      leaf id {
        type uint32;
        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">must ". &gt;= 1";</font></strong>
        description
          "NAT instance <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">identifier.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">identifier.

          The identifier must be greater than zero as per RFC 7659.";</font></strong>
        reference
          "RFC <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">7659.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">7659: Definitions of Managed Objects for Network
                     Address Translators (NATs)";</font></strong>
      }

      leaf name {
        type string;
        description
          "A name associated with the NAT instance.";
        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">reference
          "RFC 7659: Definitions of Managed Objects for Network
                     Address Translators (NATs)";</font></strong>
      }

      leaf enable {
        type boolean;
        description
         "Status of the the NAT instance.";
      }

      container capabilities {
        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">config false;</font></strong>

        description
          "NAT capabilities";

        leaf-list nat-flavor {
          type identityref {
            base nat-type;
          }
          description
            "Type of NAT.";
        }

        <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">leaf-list nat44-flavor {
          when "../nat-flavor = 'nat44'";
          type identityref {
            base nat44;
          }
          description
            "Type of NAT44: Basic NAT or NAPT.";
        }</font></strike>

        leaf restricted-port-support {
          type boolean;
          description
            "Indicates source port NAT restriction support.";
          reference
             "RFC 7596: Lightweight 4over6: An Extension to
                        the Dual-Stack Lite Architecture.";
        }

        leaf static-mapping-support {
          type boolean;
          description
            "Indicates whether static mappings are supported.";
        }

        leaf port-randomization-support {
          type boolean;
          description
            "Indicates whether port randomization is supported.";
          reference
            "Section 4.2.1. of RFC 4787.";
        }

        leaf port-range-allocation-support {
          type boolean;
          description
            "Indicates whether port range allocation is supported.";
          reference
            "Section 1.1 of RFC 7753.";
        }

        leaf port-preservation-suport {
          type boolean;
          description
            "Indicates whether port preservation is supported.";
          reference
            "Section 4.2.1. of RFC 4787.";
        }

        leaf port-parity-preservation-support {
          type boolean;
          description
            "Indicates whether port parity preservation is
             supported.";
          reference
            "Section 8 of RFC 7857.";
        }

        leaf address-roundrobin-support {
          type boolean;
          description
           "Indicates whether address allocation round robin is
            supported.";
        }

        leaf paired-address-pooling-support {
          type boolean;
          description
            "Indicates whether paired-address-pooling is
             supported";
           reference
             "REQ-2 of RFC 4787.";
        }

        leaf endpoint-independent-mapping-support {
          type boolean;
          description
            "Indicates whether endpoint-independent-
             mapping in Section 4 of RFC 4787 is
             supported.";
           reference
             "Section 4 of RFC 4787.";
        }

        leaf address-dependent-mapping-support {
          type boolean;
          description
            "Indicates whether address-dependent-mapping is
             supported.";
           reference
             "Section 4 of RFC 4787.";
        }

        leaf address-and-port-dependent-mapping-support {
          type boolean;
          description
            "Indicates whether address-and-port-dependent-mapping is
             supported.";
           reference
             "Section 4 of RFC 4787.";
        }

        leaf endpoint-independent-filtering-support {
          type boolean;
          description
            "Indicates whether endpoint-independent-filtering is
             supported.";
           reference
             "Section 5 of RFC 4787.";
        }

        leaf address-dependent-filtering {
          type boolean;
          description
            "Indicates whether address-dependent-filtering is
             supported.";
           reference
             "Section 5 of RFC 4787.";
        }

        leaf address-and-port-dependent-filtering {
          type boolean;
          description
            "Indicates whether address-and-port-dependent is
             supported.";
           reference
             "Section 5 of RFC 4787.";
        }
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">}

      list nat-pass-through</font></strike>

        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">leaf fragment-behavior</font></strong> {
        <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">key id;

        description
         "IP prefix NAT</font></strike>
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">type enumeration {
            enum "unssupported"  {
              description
                "No capability to translate incoming fragments.
                 All received fragments are dropped.";
            }

            enum "in-order"  {
              description
                "The NAT instance is able to translate fragments only if
                 they are received in order. That is, in particular the
                 header is in the first packet. Fagements received
                 out of order are droped. ";
            }

            enum "out-of-order"  {
              description
                "The NAT instance is able to translate a fragment even
                 if it is received out of order.

                 This behavior is the one recommended in RFC4787.";
              reference
                "REQ-14 of RFC 4787";
            }
          }
          description
            "The fragment behavior is the NAT instance's capability to
             translate fragments received on the external interface of
             the NAT.";
        }

      }

      list nat-pass-through {
        if-feature "basic-nat44 or napt44 or dst-nat";
        key id;

        description
         "IP prefix NAT</font></strong> pass through.";

        leaf id {
          type uint32;
          description
            "An identifier of the IP prefix pass through.";
        }

        leaf prefix {
          type inet:ip-prefix;
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
          description
            "The IP addresses that match should not be translated.

             According to REQ#6 of RFC6888, it must be possible to
             administratively turn off translation for specific
             destination addresses and/or ports.";
          reference
            "REQ#6 of RFC6888.";
        }

        leaf port {
          type inet:port-number;
          description
            "According to REQ#6 of RFC6888, it must be possible to
             administratively turn off translation for specific
             destination addresses and/or ports.

             If no prefix is defined, the NAT pass through bound
             to a given port applies for any destination address.";

          reference
            "REQ#6 of RFC6888.";
        }
      }

     list policy {
       key id;
       description
         "NAT parameters for a given instance";

       leaf id {
         type uint32;
         description
           "An identifier of the NAT policy.";
       }

       container clat-parameters {
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature clat;</font></strong>
         description
           "CLAT parameters.";

         list clat-ipv6-prefixes {
           <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../../capabilities/nat-flavor = 'clat' ";</font></strike>
           key ipv6-prefix;
           description
             "464XLAT double translation treatment is stateless when a
              dedicated /64 is available for translation on the CLAT.
              Otherwise, the CLAT will have both stateful and stateless
              since it requires NAT44 from the LAN to a single IPv4
              address and then stateless translation to a single
              IPv6 address.";
            reference
              "RFC 6877: 464XLAT: Combination of Stateful and Stateless
                         Translation";

            leaf ipv6-prefix {
              type inet:ipv6-prefix;
              description
                "An IPv6 prefix used for CLAT.";
            }
          }

          list ipv4-prefixes {
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../../capabilities/nat-flavor = 'clat'";</font></strike>
            key ipv4-prefix;
            description
              "Pool of IPv4 addresses used for CLAT.

               192.0.0.0/29 is the IPv4 service continuity prefix.";
            reference
              "RFC 7335: IPv4 Service Continuity Prefix";

            leaf ipv4-prefix {
              type inet:ipv4-prefix;
              description
                "464XLAT double translation treatment is
                 stateless when a dedicated /64 is available
                 for translation on the CLAT.  Otherwise, the
                 CLAT will have both stateful and stateless
                 since it requires NAT44 from the LAN to
                 a single IPv4 address and then stateless
                 translation to a single IPv6 address.
                 The CLAT performs NAT44 for all IPv4 LAN
                 packets so that all the LAN-originated IPv4
                 packets appear from a single IPv4 address
                 and are then statelessly translated to one
                 interface IPv6 address that is claimed by
                 the CLAT.

                 An IPv4 address from this pool is also
                 provided to an application that makes
                 use of literals.";

             reference
               "RFC 6877: 464XLAT: Combination of Stateful and Stateless
                          Translation";
           }
         }
       }

       list nptv6-prefixes {
         <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat-flavor = 'nptv6' ";</font></strike>
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature nptv6;</font></strong>
         key <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">translation-id;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">internal-ipv6-prefix ;</font></strong>
         description
           "Provides one or a list of (internal IPv6 prefix,
            external IPv6 prefix) required for NPTv6.

            In its simplest form, NPTv6 interconnects two network
            links, one of which is an 'internal' network link
            attached to a leaf network within a single
            administrative domain and the other of which is an
            'external' network with connectivity to the global
            Internet.";
          reference
            "RFC 6296: IPv6-to-IPv6 Network Prefix Translation";

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">translation-id {
            type uint32;
            description
            "An identifier of the NPTv6 prefixes.";
          }

          leaf</font></strike> internal-ipv6-prefix {
            type inet:ipv6-prefix;
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
            description
              "An IPv6 prefix used by an internal interface of NPTv6.";
            reference
              "RFC 6296: IPv6-to-IPv6 Network Prefix Translation";
         }

         leaf external-ipv6-prefix {
           type inet:ipv6-prefix;
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
           description
             "An IPv6 prefix used by the external interface of NPTv6.";
           reference
             "RFC 6296: IPv6-to-IPv6 Network Prefix Translation";
         }
       }

       list eam {
         <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat-flavor = 'eam' ";</font></strike>
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature eam;</font></strong>
         key ipv4-prefix;
         description
           "The Explicit Address Mapping Table, a conceptual
            table in which each row represents an EAM.

            Each EAM describes a mapping between IPv4 and IPv6
            prefixes/addresses.";
         reference
           "Section 3.1 of RFC 7757.";

         leaf ipv4-prefix {
           type inet:ipv4-prefix;
           <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
           description
             "The IPv4 prefix of an EAM.";
           reference
             "Section 3.2 of RFC 7757.";
         }

         leaf ipv6-prefix {
           type inet:ipv6-prefix;
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
           description
             "The IPv6 prefix of an EAM.";
           reference
             "Section 3.2 of RFC 7757.";
         }

       }

       list nat64-prefixes {
         <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat-flavor = 'nat64' " +
              "</font></strike>
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "nat64</font></strong> or <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">../../capabilities/nat-flavor = 'clat'";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">clat";</font></strong>
         key nat64-prefix;
         description
           "Provides one or a list of NAT64 prefixes
            with or without a list of destination IPv4 prefixes.

            Destination-based Pref64::/n is discussed in
            Section 5.1 of [RFC7050]). For example:
            192.0.2.0/24 is mapped to 2001:db8:122:300::/56.
            198.51.100.0/24 is mapped to 2001:db8:122::/48.";
         reference
           "Section 5.1 of RFC7050.";

         leaf nat64-prefix {
           type inet:ipv6-prefix;
           <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
           description
             "A NAT64 prefix. Can be <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NSP</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Network-Specific Prefix (NSP)</font></strong> or <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">a</font></strike>
              Well-Known Prefix (WKP).

              Organizations deploying stateless IPv4/IPv6 translation
              should assign a Network-Specific Prefix to their
              IPv4/IPv6 translation service.

              For stateless NAT64, IPv4-translatable IPv6 addresses
              must use the selected Network-Specific Prefix.
              Both IPv4-translatable IPv6 addresses and IPv4-converted
              IPv6 addresses should use the same prefix.";
           reference
             "Sections 3.3 and 3.4 of RFC 6052.";
         }

         list destination-ipv4-prefix {
           key ipv4-prefix;
           description
             "An IPv4 prefix/address.";

           leaf ipv4-prefix {
             type inet:ipv4-prefix;
             description
               "An IPv4 address/prefix.";
            }
          }

          leaf stateless-enable {
            type boolean;
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">default false;</font></strong>
            description
              "Enable explicitly statless NAT64.";
         }
       }

       list external-ip-address-pool {
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
         key pool-id;

         description
           "Pool of external IP addresses used to service internal
            hosts.

            A pool is a set of IP prefixes.";

         leaf pool-id {
           type uint32;
           <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">must ". &gt;= 1";</font></strong>
           description
             "An identifier <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">of</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">that uniquely identifies</font></strong> the address <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">pool.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">pool
              within a NAT instance.

              The identifier must be greater than zero as per
              RFC 7659.";
           reference
             "RFC 7659: Definitions of Managed Objects for
                        Network Address Translators (NATs)";</font></strong>
         }

         leaf external-ip-pool {
           type inet:ipv4-prefix;
           <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
           description
             "An IPv4 prefix used for NAT purposes.";
         }
       }

       container port-set-restrict {
         <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/restricted-port-support = 'true'";</font></strike>
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
         description
           "Configures contiguous and non-contiguous port <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ranges.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">ranges.

            The port set is used to restrict the external source
            port numbers used by the translator.";</font></strong>

         uses port-set;

       }

       leaf dst-nat-enable {
         <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44";</font></strong>
         type boolean;
         default false;
         description
           "Enable/Disable destination NAT.

            A NAT44 may be configured to enable Destination
            NAT, too.";
        }

        list dst-ip-address-pool {
          <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat-flavor = 'dst-nat' ";</font></strike>
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature dst-nat;</font></strong>
          key pool-id;
          description
            "Pool of IP addresses used for destination NAT.";

          leaf pool-id {
            type uint32;
            description
              "An identifier of the address pool.";
          }

          leaf dst-in-ip-pool {
            type inet:ip-prefix;
            description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Internal</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Is used to identify an internal</font></strong> IP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">prefix/address";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">prefix/address
               to be translated.";</font></strong>
          }

          leaf dst-out-ip-pool {
            type inet:ip-prefix;
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
            description
              "IP address/prefix used for destination NAT.";
          }
        }

        list <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">supported-transport-protocols</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">transport-protocols</font></strong> {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64 or dst-nat";</font></strong>
          key <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport-protocol-id;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id;</font></strong>

          description
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Supported</font></strike>
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Configure the</font></strong> transport <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">protocols.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocols to be handled by
             the translator.</font></strong>

             TCP and UDP are supported by default.";

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport-protocol-id</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id</font></strong> {
            type uint8;
            mandatory true;
            description
              "Upper-layer protocol associated with this mapping.

               Values are taken from the IANA protocol <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">registry.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">registry:
               https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml</font></strong>

               For example, this field contains 6 (TCP) for a TCP
               mapping or 17 (UDP) for a UDP mapping.";
          }

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport-protocol-name</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-name</font></strong> {
            type string;
            description
                  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"For</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"The name of the Upper-layer protocol associated
               with this mapping.

               Values are taken from the IANA protocol registry:
               https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml

               For</font></strong> example, TCP, UDP, DCCP, and SCTP.";
          }
        }

        leaf subscriber-mask-v6 {
          type uint8 {
            range "0 .. 128";
          }

          description
            "The subscriber-mask is an integer that indicates
             the length of significant bits to be applied on
             the source IPv6 address (internal side) to
             unambiguously identify a CPE.

             Subscriber-mask is a system-wide configuration
             parameter that is used to enforce generic
             per-subscriber policies (e.g., port-quota).

             The enforcement of these generic policies does not
             require the configuration of every subscriber's
             prefix.

             Example: suppose the 2001:db8:100:100::/56 prefix
             is assigned to a NAT64 serviced CPE. Suppose also
             that 2001:db8:100:100::1 is the IPv6 address used
             by the client that resides in that CPE. When the
             NAT64 receives a packet from this client,
             it applies the subscriber-mask (e.g., 56) on
             the source IPv6 address to compute the associated
             prefix for this client (2001:db8:100:100::/56).
             Then, the NAT64 enforces policies based on that
             prefix (2001:db8:100:100::/56), not on the exact
             source IPv6 address.";
        }

        list subscriber-match {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or dst-nat";</font></strong>
          key <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sub-match-id;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">match-id;</font></strong>

          description
            "IP prefix <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">match.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">match.
             A subsciber is identified by a subnet.";</font></strong>

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sub-match-id</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">match-id</font></strong> {
            type uint32;
            description
              "An identifier of the subscriber <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mask.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">match.";</font></strong>
          }

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sub-mask</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">subnet</font></strong> {
            type inet:ip-prefix;
            mandatory true;
            description
              "The IP address subnets that match
               should be translated. E.g., all addresses
               that belong to the 192.0.2.0/24 prefix must
               be processed by the NAT.";
          }
        }

        leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">paired-address-pooling</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address-allocation-type</font></strong> {
          type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">boolean;
          default true;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">enumeration {
            enum "arbitrary"  {
              if-feature "basic-nat44 or napt44 or nat64";
              description
                "Arbitrary pooling behavior means that the NAT instance
                 may create the new port mapping using any address in the
                 pool that has a free port for the protocol concerned.";
            }

            enum "roundrobin"  {
              if-feature "basic-nat44 or napt44 or nat64";
              description
                "Round robin allocation.";
            }

            enum "paired"  {
              if-feature "napt44 or nat64";</font></strong>
              description
                "Paired address pooling informs the NAT
                 that all the flows from an internal IP
                 address must be assigned the same external
             <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">address.";</font></strike>
                 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address. This is the recommended behavior for
                 NAPT/NAT64.";</font></strong>
              reference
                "RFC 4787: Network Address Translation (NAT) Behavioral
                           Requirements for Unicast UDP";
            }
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">}
          description
            "Specifies how external IP addresses are allocated.";
        }

        leaf port-allocation-type {
          if-feature "napt44 or nat64";
          type enumeration {
            enum "random"  {
              description
                "Port randomization is enabled. A NAT port allocation
                 scheme should make it hard for attackers to guess port
                  numbers";
              reference
                "REQ-15 of RFC 6888";
            }

            enum "port-preservation"  {
              description
                "Indicates whether the NAT should preserve the internal
                 port number.";
            }

            enum "port-parity-preservation"  {
              description
                "Indicates whether the NAT should preserve the port
                 parity of the internal port number.";
            }

            enum "port-range-allocation"  {
              description
                "Indicates whether the NAT assigns a range of ports for
                 an internal host. This scheme allows to minimize
                 log volume.";
              reference
                "REQ-14 of RFC 6888";
            }
          }
            description
              "Indicates the type of port allocation.";
        }</font></strong>

        leaf mapping-type {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
          type enumeration {
            enum "eim"  {
              description
                "endpoint-independent-mapping.";
              reference
                "Section 4 of RFC 4787.";
            }

            enum "adm"  {
              description
                "address-dependent-mapping.";
              reference
                "Section 4 of RFC 4787.";
            }

            enum "edm"  {
              description
                "address-and-port-dependent-mapping.";
              reference
                "Section 4 of RFC 4787.";
            }
          }
          description
            "Indicates the type of a NAT mapping.";
        }

        leaf filtering-type {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
          type enumeration {
            enum "eif"  {
              description
                "endpoint-independent-filtering.";
              reference
                "Section 5 of RFC 4787.";
            }
            enum "adf"  {
              description
                "address-dependent-filtering.";
              reference
                "Section 5 of RFC 4787.";
            }

            enum "edf"  {
              description
                "address-and-port-dependent-filtering";
              reference
                "Section 5 of RFC 4787.";
            }
          }
            description
              "Indicates the type of a NAT filtering.";
        }

        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">leaf fragment-behavior {
          if-feature "napt44 or nat64";
          type enumeration {
            enum "drop-all"  {
              description
                "All received fragments are dropped.";
            }

            enum "in-order"  {
              description
                "Translate fragments only if they are received in order.";
            }

            enum "out-of-order"  {
              description
                "Translate a fragment even if it is received out of order.

                 This behavior is the recommended behavior.";
              reference
                "REQ-14 of RFC 4787";
             }
           }
           description
             "The fragment behavior instructs the NAT about the behavior
              to follow to translate fragments received on the external
              interface of the NAT.";
          }</font></strong>

        list port-quota {
          <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat44-flavor = "+
               "'napt'</font></strike>
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44</font></strong> or <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"+
               "../../capabilities/nat-flavor = "+
               "'nat64'";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">nat64";</font></strong>
          key quota-type;
          description
            "Configures a port quota to be assigned per subscriber.
             It corresponds to the maximum number of ports to be
             used by a subscriber.";

          leaf port-limit {
            type uint16;
            description
              "Configures a port quota to be assigned per subscriber.
               It corresponds to the maximum number of ports to be
               used by a subscriber.";
            reference
              "REQ-4 of RFC 6888.";
          }

          leaf quota-type {
              type uint8;
              description
                "Indicates whether the port quota applies to
                 all protocols (0) or to a specific <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">transport.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol.";</font></strong>
          }
        }

        <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">container port-set {

          when "../port-allocation-type = 'port-range-allocation'";

          if-feature "napt44 or nat64";
          description
            "Manages port-set assignments.";</font></strong>

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">port-allocation-type</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">port-set-size</font></strong> {
            type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">enumeration {
              enum "random"  {
                description
                  "Port randomization is enabled.";
              }

              enum "port-preservation"  {
                description
                  "Indicates whether the NAT should
                   preserve the internal port number.";
              }

              enum "port-parity-preservation"  {
                description
                  "Indicates whether the NAT should
                   preserve the port parity of the
                   internal port number.";
              }

              enum "port-range-allocation"  {
                description
                  "Indicates whether the NAT assigns a
                   range of ports for an internal host.";
              }
            }
              description
                "Indicates the type of a port allocation.";
          }

          leaf address-roundrobin-enable {
            type boolean;

            description
              "Enable/disable address allocation
               round robin.";
          }

          container port-set {
            when "../port-allocation-type='port-range-allocation'";

            description
              "Manages port-set assignments.";

            leaf port-set-size {
              type uint16;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">uint16;
            mandatory true;</font></strong>
            description
              "Indicates the size of assigned port sets.";
          }

          leaf port-set-timeout {
            type uint32;
            units "seconds";
            description
              "Inactivty timeout for port sets.";
          }
        }

        container timers {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
          description
            "Configure values of various timeouts.";

            leaf udp-timeout {
              type uint32;
              units "seconds";
              default 300;
              description
                "UDP inactivity timeout. That is the time a mapping
                 will stay active without packets traversing the NAT.";
              reference
                "RFC 4787: Network Address Translation (NAT)
                           Behavioral Requirements for Unicast UDP";
            }

            leaf tcp-idle-timeout {
              type uint32;
              units "seconds";
              default 7440;
              description
                "TCP Idle timeout should be 2 hours and 4 minutes.";
              reference
                "RFC 5382: NAT Behavioral Requirements for TCP";
            }

            leaf tcp-trans-open-timeout {
              type uint32;
              units "seconds";
              default 240;
              description
                "The value of the transitory open connection
                 idle-timeout.

                 Section 2.1 of [RFC7857] clarifies that a NAT
                 should provide different configurable
                 parameters for configuring the open and
                 closing idle timeouts.

                 To accommodate deployments that consider
                 a partially open timeout of 4 minutes as being
                 excessive from a security standpoint, a NAT may
                 allow the configured timeout to be less than
                 4 minutes.

                 However, a minimum default transitory connection
                 idle-timeout of 4 minutes is recommended.";
              reference
                "Section 2.1 of RFC 7857.";
            }

            leaf tcp-trans-close-timeout {
              type uint32;
              units "seconds";
              default 240;
              description
                "The value of the transitory close connection
                idle-timeout.

                Section 2.1 of [RFC7857] clarifies that a NAT
                should provide different configurable
                parameters for configuring the open and
                closing idle timeouts.";
              reference
                "Section 2.1 of RFC 7857.";
            }

            leaf tcp-in-syn-timeout {
              type uint32;
              units "seconds";
              default 6;
              description
                "A NAT must not respond to an unsolicited
                inbound SYN packet for at least 6 seconds
                after the packet is received.  If during
                this interval the NAT receives and translates
                an outbound SYN for the connection the NAT
                must silently drop the original unsolicited
                inbound SYN packet.";
             reference
                "RFC 5382 NAT Behavioral Requirements for TCP";
            }

            leaf fragment-min-timeout {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">when "../../fragment-behavior='out-of-order'";</font></strong>
              type uint32;
              units "seconds";
              default 2;
              description
                "As long as the NAT has available resources,
                the NAT allows the fragments to arrive
                over fragment-min-timeout interval.
                The default value is inspired from RFC6146.";
            }

            leaf icmp-timeout {
              type uint32;
              units "seconds";
              default 60;
              description
                "An ICMP Query session timer must not expire
                 in less than 60 seconds. It is recommended
                 that the ICMP Query session timer be made
                 configurable";
              reference
                "RFC 5508: NAT Behavioral Requirements for ICMP";
            }

            list per-port-timeout {
              key port-number;
              description
                "Some NATs are configurable with short timeouts
                 for some ports, e.g., as 10 seconds on
                 port 53 (DNS) and NTP (123) and longer timeouts
                 on other ports.";

              leaf port-number {
                type inet:port-number;
                description
                  "A port number.";
              }

              leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">port-timeout</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">timeout</font></strong> {
                type uint32;
                units "seconds";
                mandatory true;
                description
                  "Timeout for this <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">port";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">port number";</font></strong>
              }
            }

            leaf hold-down-timeout {
              type uint32;
              units "seconds";
              default 120;
              description
                "Hold down timer.

                 Ports in the hold down pool are not reassigned until
                 hold-down-timeout expires.

                 The length of time and the maximum number of ports in
                 this state must be configurable by the administrator.

                 This is necessary in order to prevent collisions
                 between old and new mappings and sessions. It ensures
                 that all established sessions are broken instead of
                 redirected to a different peer.";
              reference
                "REQ#8 of RFC 6888.";
            }

            leaf hold-down-max {
              type uint32;
              description
                "Maximum ports in the Hold down timer pool.

                 Ports in the hold down pool are not reassigned
                 until hold-down-timeout expires.

                 The length of time and the maximum
                 number of ports in this state must be
                 configurable by the administrator.
                 This is necessary in order
                 to prevent collisions between old
                 and new mappings and sessions. It ensures
                 that all established sessions are broken
                 instead of redirected to a different peer.";
              reference
                "REQ#8 of RFC 6888.";
            }
          }

          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">leaf fragment-limit{
            when "../fragment-behavior='out-of-order'";
            type uint32;
            description
              "Limits the number of out of order fragments that can
               be handled.";
            reference
              "Section 11 of RFC 4787.";
          }</font></strong>

          list algs {
            key name;
            description
              "ALG-related features.";

            leaf name {
              type string;
              description
                "The name of the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ALG";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">ALG.";</font></strong>

            }

            leaf transport-protocol {
              type uint32;
              description
                "The transport protocol used by the <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">ALG
                 (e.g., TCP, UDP).";
            }

            container dst-transport-port {
              uses port-number;
              description
                "The destination port number(s) used by the ALG.
                 For example,
                   - 21 for the FTP ALG
                   - 53 for the DNS</font></strong> ALG.";
            }

            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">leaf transport-port</font></strike>

            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">container src-transport-port</font></strong> {
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">type inet:port-number;</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">uses port-number;</font></strong>
              description
                "The <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">source</font></strong> port <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">number</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">number(s)</font></strong> used by the ALG.";
            }

            leaf status {
              type boolean;
              description
                "Enable/disable the ALG.";
            }
          }

          leaf all-algs-enable {
            type boolean;
            description
             "Enable/disable all ALGs.

              When specified, this parameter overrides the one
              that may be indicated, eventually, by the 'status'
              of an individual ALG.";
          }

          container notify-pool-usage {
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
            description
              "Notification of pool usage when certain criteria
               are met.";

            leaf pool-id {
              type uint32;
              description
                "Pool-ID for which the notification criteria
                 is defined";
            }

            leaf high-threshold {
              type percent;
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mandatory true;</font></strike>
              description
                "Notification must be generated when the defined high
                 threshold is reached.

                 For example, if a notification is required when the
                 pool utilization reaches 90%, this configuration
                 parameter must be set to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">90%.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">90%.

                 0% indicates that no high treshold is enabled.";</font></strong>
            }

            leaf low-threshold {
              type percent;
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">must ". &gt;= ../high-threshold" {
                error-message
                  "The upper port number must be greater than or
                   equal to lower port number.";
              }</font></strong>
              description
                "Notification must be generated when the defined low
                 threshold is reached.

                 For example, if a notification is required when the
                 pool utilization reaches below 10%, this
                 configuration parameter must be set to 10%.";
            }

            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">leaf notify-interval {
              type uint32 {
                 range "1 .. 3600";
              }
              units "seconds";
              default '20';
              description
                "Minimum number of seconds between successive
                 notifications for this pool.";

              reference
                "RFC 7659: Definitions of Managed Objects for
                           Network Address Translators (NATs)";

            }</font></strong>
          }

          container external-realm {
            description
              "Identifies the external realm of the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">NAT instance.";</font></strong>

            choice realm-type {
              description
                <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Interface or VRF.";</font></strike>
                <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Can be an interface, VRF instance, etc.";</font></strong>

              case interface {
                description
                  "External interface.";

                leaf external-interface {
                  type if:interface-ref;
                  description
                    "Name of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">an</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">the</font></strong> external interface.";
                }
              }

              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">case vrf {
                description
                  "External VRF instance.";

                leaf external-vrf-instance {
                  type identityref {
                  base vrf-routing-instance;
                }
                  description
                    "A VRF instance.";
                }
              }</font></strike>
            }
          }
        }

        container mapping-limit {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
          description
            "Information about the configuration parameters that
             limits the mappings based upon various criteria.";

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-subscriber</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-subscribers</font></strong> {
            type uint32;
            description
              "Maximum number of <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">subscribers that can be serviced
               by a</font></strong> NAT <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mappings per subscriber.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">instance.</font></strong>

               A subscriber is identifier by a given prefix.";
             <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">reference
               "RFC 7659: Definitions of Managed Objects for
                          Network Address Translators (NATs)";</font></strong>
          }

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-vrf</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-address-mapings</font></strong> {
            type uint32;
            description
              "Maximum number of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address</font></strong> mappings <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">per VLAN/VRF.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">that can be
               handled by a NAT instance.

               When this limit is reached, packets that would
               normaly trigger translation, will be droped.";
             reference
               "RFC 7659: Definitions of Managed Objects
                          for Network Address Translators
                          (NATs)";</font></strong>
          }

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-instance</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit-port-mappings</font></strong> {
            type uint32;
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mandatory true;</font></strike>
            description
              "Maximum number of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">port</font></strong> mappings <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">per instance.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">that can be handled
               by a NAT instance.

               When this limit is reached, packets that would
               normaly trigger translation, will be droped.";
             reference
               "RFC 7659: Definitions of Managed Objects for
                          Network Address Translators (NATs)";</font></strong>
          }

          <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">leaf limit-per-udp</font></strike>

          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">list limit-per-protocol</font></strong> {
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">type uint32;
            mandatory true;</font></strike>
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64 or dst-nat";
            key protocol-id;</font></strong>

            description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Maximum number of UDP NAT mappings</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Configure limits</font></strong> per <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">subscriber.";
          }</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">transport protocol";</font></strong>

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-tcp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id</font></strong> {
              type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">uint32;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">uint8;</font></strong>
              mandatory true;
              description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Maximum number of</font></strike>
                <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Upper-layer protocol associated with this mapping.

                 Values are taken from the IANA protocol registry:
                 https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml

                 For example, this field contains 6 (TCP) for a</font></strong> TCP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT mappings per subscriber.";</font></strike>
                 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mapping or 17 (UDP) for a UDP mapping.";</font></strong>
            }

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-icmp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit</font></strong> {
              type uint32;
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mandatory true;</font></strike>
              description
                "Maximum number of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ICMP</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-specific</font></strong> NAT mappings
                 per <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">subscriber.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">instance.";
            }</font></strong>
          }

        }

        container connection-limit {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
          description
            "Information about the configuration parameters that
             rate limit the translation based upon various criteria.";

          leaf limit-per-subscriber {
            type uint32;
            units "bits/second";
            description
              "Rate-limit the number of new mappings and sessions
               per subscriber.";
           }

          leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-vrf {
            type uint32;
            units "bits/second";
            description
              "Rate-limit the number of new mappings
               and sessions per VLAN/VRF.";
          }

          leaf</font></strike> limit-per-instance {
            type uint32;
            units "bits/second";
            mandatory true;
            description
              "Rate-limit the number of new mappings and sessions
               per instance.";
          }

          <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">leaf limit-per-udp</font></strike>

          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">list limit-per-protocol</font></strong> {
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">type uint32;
            units "bits/second";
            mandatory true;</font></strike>
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";
            key protocol-id;</font></strong>
            description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Rate-limit the number of new UDP mappings
               and sessions</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Configure limits</font></strong> per <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">subscriber.";
          }</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">transport protocol";</font></strong>

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-tcp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-id</font></strong> {
              type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">uint32;
            units "bits/second";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">uint8;</font></strong>
              mandatory true;
              description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Rate-limit</font></strike>
                <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Upper-layer protocol associated with this mapping.

                 Values are taken from</font></strong> the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">number of new</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">IANA protocol registry:
                 https://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml

                 For example, this field contains 6 (TCP) for a</font></strong> TCP <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">mappings
               and sessions per subscriber.";</font></strike>
                 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mapping or 17 (UDP) for a UDP mapping.";</font></strong>
            }

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">limit-per-icmp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">limit</font></strong> {
              type uint32;
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">units "bits/second";
            mandatory true;</font></strike>
              description
                "Rate-limit the number of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">new ICMP</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">protocol-specific</font></strong> mappings
                 and sessions per <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">subscriber.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">instance.";
            }</font></strong>
          }
        }

        container <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">logging-info</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notification-limits</font></strong> {
          description
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Information about logging NAT events";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Sets notification limits.";</font></strong>

        leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">logging-enable</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notify-interval</font></strong> {
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
            type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">boolean;
            description
              "Enable logging features.";
            reference
              "Section 2.3 of RFC 6908.";
          }

          leaf destination-address</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">uint32</font></strong> {
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">type inet:ip-prefix;
            mandatory true;</font></strike>
                 <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">range "1 .. 3600";
            }
            units "seconds";
            default '10';</font></strong>
            description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Address</font></strike>
                <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Minimum number</font></strong> of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">the collector that receives
               the logs";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">seconds between successive
                 notifications for  this NAT instance.";
            reference
              "RFC 7659: Definitions of Managed Objects
                         for Network Address Translators (NATs)";</font></strong>
        }

        leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">destination-port</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notify-addresses-usage</font></strong> {
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
            type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">inet:port-number;
            mandatory true;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">percent;</font></strong>
            description
              <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"Destination port</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Notification</font></strong> of <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">address mappings usage over</font></strong>
               the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">collector.";
          }

          choice protocol {

            description
              "Enable the protocol to</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">whole NAT instance.

               Notification must</font></strong> be <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">used for</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">generated when</font></strong> the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">retrieval of logging entries.";

            case syslog {
              leaf syslog {
                type boolean;
                description
                  "If SYSLOG</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">defined
               threshold</font></strong> is <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">in use.";
              }</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">reached.

               For example, if a notification is required when
               the address mappings utilization reaches 90%,
               this configuration parameter must be set
               to 90%.";</font></strong>
         }

            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">case ipfix {</font></strike>

        leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ipfix</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">notify-ports-usage</font></strong> {
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
            type <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">boolean;</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">percent;</font></strong>
            description
                  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"If IPFIX</font></strike>
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Notification of port mappings usage over the
               whole NAT instance.

               Notification must be generated when the defined
               threshold</font></strong> is <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">in use.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">reached.

               For example, if a notification is required when
               the port mappings utilization reaches 90%, this
               configuration parameter must be set to 90%.";</font></strong>
         }
        }

            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">case ftp {</font></strike>

        leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ftp</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">logging-enable</font></strong> {
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
          type boolean;
          description
                  <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"If FTP is in use.";
              }
            }
          }</font></strike>
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"Enable logging features.";
          reference
            "Section 2.3 of RFC 6908 and REQ-12 of RFC6888.";</font></strong>
        }

        container mapping-table {
          <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../capabilities/nat-flavor = "+
               "'nat44'</font></strike>
          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44</font></strong> or <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"+
               "../capabilities/nat-flavor = "+
               "'nat64'or "+
               "../capabilities/nat-flavor = "+
               "'clat'or "+
               "../capabilities/nat-flavor = 'dst-nat'";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">napt44 or nat64 or clat or dst-nat";</font></strong>
          description
            "NAT mapping table. Applicable for functions which <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">maintains</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">maintain</font></strong>
             static and/or dynamic mappings, such as NAT44, Destination
             NAT, NAT64, or CLAT.";

          list mapping-entry {
            key "index";
            description "NAT mapping entry.";
            uses mapping-entry;
          }
        }

        container statistics {
          config false;

          description
            "Statistics related to the NAT instance.";

          <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">leaf discontinuity-time {
            type yang:date-and-time;
            mandatory true;
            description
              "The time on the most recent occasion at which the NAT
               instance suffered a discontinuity.  This must be
               initialized when the NAT instance is configured
               or rebooted.";
          }</font></strong>

          container traffic-statistics {
            description
              "Generic traffic statistics.";

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sent-packets</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">sent-packets {
              type yang:zero-based-counter64;
              description
                "Number of packets sent.";
            }

            leaf sent-bytes {
              type yang:zero-based-counter64;
              units 'bytes';
              description
                "Counter for sent traffic in bytes.";
            }

            leaf rcvd-packets {
              type yang:zero-based-counter64;
              description
                "Number of received packets.";
            }

            leaf rcvd-bytes {
              type yang:zero-based-counter64;
              units 'bytes';
              description
                "Counter for received traffic in bytes.";
            }

            leaf dropped-packets {
              type yang:zero-based-counter64;
              description
                "Number of dropped packets.";
            }

            leaf dropped-bytes {
              type yang:zero-based-counter64;
              units 'bytes';
              description
                "Counter for dropped traffic in bytes.";
            }

            leaf dropped-fragments {
              if-feature "napt44 or nat64";
              type yang:zero-based-counter64;
              description
                "Number of dropped fragments on the external realm.";
            }

            leaf dropped-address-limit-packets {
              if-feature "basic-nat44 or napt44 or nat64";
              type yang:zero-based-counter64;
              description
                "Number of dropped packets because an address limit
                  is reached.";
            }

            leaf dropped-address-limit-bytes {
              if-feature "basic-nat44 or napt44 or nat64";
              type yang:zero-based-counter64;
              units 'bytes';
              description
                "Counter of dropped packets because an address limit
                  is reached, in bytes.";
            }

            leaf dropped-address-packets {
              if-feature "basic-nat44 or napt44 or nat64";
              type yang:zero-based-counter64;
              description
                "Number of dropped packets because no address is
                 available for allocation.";
            }

            leaf dropped-address-bytes {
              if-feature "basic-nat44 or napt44 or nat64";
              type yang:zero-based-counter64;
              units 'bytes';
              description
                "Counter of dropped packets because no address is
                 available for allocation, in bytes.";
            }

            leaf dropped-port-limit-packets</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:zero-based-counter64;
              description
                "Number of <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped</font></strong> packets <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sent.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">because a port limit
                 is reached.";</font></strong>
            }

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">sent-bytes</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped-port-limit-bytes</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:zero-based-counter64;
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">units 'bytes';</font></strong>
              description
                "Counter <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">for sent traffic</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">of dropped packets because a port limit
                 is reached,</font></strong> in bytes.";
            }
            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">rcvd-packets</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped-port-packets</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:zero-based-counter64;
              description
                "Number of <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">received packets.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped packets because no port is
                 available for allocation.";</font></strong>
            }

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">rcvd-bytes</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped-port-bytes</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:zero-based-counter64;
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">units 'bytes';</font></strong>
              description
                "Counter <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">of dropped packets because no port is
                 available</font></strong> for <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">received traffic</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">allocation,</font></strong> in bytes.";
            }

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">dropped-packets</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped-subscriber-packets</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
              type yang:zero-based-counter64;
              description
                "Number of dropped <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">packets.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">packets because the subscriber
                 limit per instance is reached.";</font></strong>
            }

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">dropped-bytes</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">dropped-subscriber-bytes</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
              type yang:zero-based-counter64;
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">units 'bytes';</font></strong>
              description
                "Counter <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">for</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">of</font></strong> dropped <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">traffic</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">packets because the subscriber
                  limit per instance is reached,</font></strong> in bytes.";
            }
          }

          container mapping-statistics {
            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat-flavor = "+
                 "'nat44' or "+
                 "../../capabilities/nat-flavor = "+
                 "'nat64'or "+
                 "../../capabilities/nat-flavor = 'dst-nat'";</font></strike>
           description
             "Mapping statistics.";

            leaf <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">total-mappings</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">total-address-mappings {
              if-feature "basic-nat44 or napt44 or nat64 or clat or dst-nat";
              type yang:gauge32;
              description
                "Total number of address mappings present at a given
                  time. It includes both static and dynamic mappings.";
              reference
               "Section 3.3.8 of RFC 7659";
            }
            leaf total-port-mappings</font></strong> {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:gauge32;
              description
                "Total number of NAT <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">port</font></strong> mappings present at
                 a given time. <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">This variable</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">It</font></strong> includes
                 <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">all the</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">both</font></strong> static and dynamic
                 mappings.";
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">reference
               "Section 3.3.9 of RFC 7659";</font></strong>
            }

            leaf total-tcp-mappings {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:gauge32;
              description
                "Total number of TCP mappings present at
                 a given time.";
            }

            leaf total-udp-mappings {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              type yang:gauge32;
              description
                "Total number of UDP mappings present at
                 a given time.";
            }

           leaf total-icmp-mappings {
             <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
             type yang:gauge32;
              description
                "Total number of ICMP mappings present at
                 a given time.";
            }
          }

          container <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">pool-stats</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">pools-stats</font></strong> {

            <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">when "../../capabilities/nat-flavor = "+
                 "'nat44'</font></strike>
            <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44</font></strong> or <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"+
                 "../../capabilities/nat-flavor = "+
                 "'nat64'";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">napt44 or nat64";
            description
              "Statistics related to address/prefix pools
               usage";

            leaf addresses-allocated {
              type yang:gauge32;
              description
                "Number of all allocated addresses.";
            }
            leaf addresses-free {
              type yang:gauge32;
              description
                "Number of unallocated addresses of all pools at
                 a given time. The sum of unallocated and allocated
                 addresses is the total number of addresses of
                 the pools.";
            }

            container ports-stats {
              if-feature "napt44 or nat64";

              description
                "Statistics related to port numbers usage.";

              leaf ports-allocated {
                type yang:gauge32;
                description
                  "Number of allocated ports from all pools.";
              }

              leaf ports-free {
                type yang:gauge32;
                description
                  "Number of unallocated addresses from all pools.";
              }
            }

          list per-pool-stats {
            if-feature "basic-nat44 or napt44 or nat64";
            key "pool-id";</font></strong>
            description
              "Statistics related to address/prefix pool usage";

            leaf pool-id {
              type uint32;
              description
                "Unique Identifier that represents a pool <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">of addresses/prefixes.";
            }</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">of
                 addresses/prefixes.";
            }

            leaf discontinuity-time {
              type yang:date-and-time;
              mandatory true;
              description
                "The time on the most recent occasion at which this
                 pool counters suffered a discontinuity.  This must
                 be initialized when the address pool is
                 configured.";
            }

            container pool-stats {
              description
                "Statistics related to address/prefix pool usage";</font></strong>

              leaf addresses-allocated {
                type yang:gauge32;
                description
                  "Number of allocated addresses <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">in
                 the pool";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">from this pool.";</font></strong>
              }

              leaf addresses-free {
                type yang:gauge32;
                description
                  "Number of unallocated addresses in
                 <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">the pool at a given time.The sum of
                 unallocated and allocated
                 addresses is the total number of
                 addresses of the</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">this</font></strong> pool.";
              }
             <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">}</font></strong>

            container port-stats {
              <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "napt44 or nat64";</font></strong>
              description
                "Statistics related to port <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">numbers</font></strong> usage.";

              leaf ports-allocated {
                type yang:gauge32;
                description
                  "Number of allocated ports
                   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">in the</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">from this</font></strong> pool.";
              }

              leaf ports-free {
                type yang:gauge32;
                description
                  "Number of unallocated addresses
                   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">in the</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">from this</font></strong> pool.";
              }
            }
          }
        }
      }
    }
  }
<strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">}</font></strong>

  /*
   * Notifications
   */

  notification <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">nat-event</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">nat-pool-event</font></strong> {
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">if-feature "basic-nat44 or napt44 or nat64";</font></strong>
    description
      "Notifications must be generated when the defined high/low
       threshold is reached. Related configuration parameters
       must be provided to trigger the notifications.";

    leaf id {
      type leafref {
        path
             <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"/nat/instances/"
              + "instance/id";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"/nat/instances/instance/id";</font></strong>
      }
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
      description
        "NAT instance <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ID.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Identifier.";</font></strong>
    }

    leaf policy-id {
      type leafref {
        path
             <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"/nat/instances/"
             + "instance/policy/id";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"/nat/instances/instance/policy/id";</font></strong>
      }

      description
        "Policy <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ID.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Identifier.";</font></strong>
    }

    leaf pool-id {
      type leafref {
        path
             <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">"/nat/instances/"
             + "instance/policy/"</font></strike>
             <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">"/nat/instances/instance/policy/"</font></strong>
             + "external-ip-address-pool/pool-id";
      }
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">mandatory true;</font></strong>
      description
        "Pool <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">ID.";</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Identifier.";</font></strong>
    }

    leaf notify-pool-threshold {
      type percent;
      mandatory true;
      description
        "A treshhold <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">(high-threshold or low-threshold) has
         been fired.";
    }
  }

  notification nat-instance-event {
    if-feature "basic-nat44 or napt44 or nat64";
    description
      "Notifications must be generated when notify-addresses-usage
       and/or notify-ports-usagethreshold are reached.";

    leaf id {
      type leafref {
        path "/nat/instances/instance/id";
      }
      mandatory true;
      description
        "NAT instance Identifier.";
    }

    leaf notify-addresses-threshold {
      type percent;
      description
        "The notify-addresses-usage treshhold has been fired.";
    }

    leaf notify-ports-threshold {
      type percent;
      description
        "The notify-ports-usage treshhold</font></strong> has been fired.";
    }
  }
}
&lt;CODE ENDS&gt;

4.  Security Considerations

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">Security considerations related to address and prefix translation are
   discussed in [RFC6888], [RFC6146], [RFC6877], [RFC7757], and
   [RFC6296].</font></strong>

   The YANG module defined in this document is designed to be accessed
   via network management protocols such as NETCONF [RFC6241] or
   RESTCONF [RFC8040].  The lowest NETCONF layer is the secure transport
   layer, and the mandatory-to-implement secure transport is Secure
   Shell (SSH) [RFC6242].  The lowest RESTCONF layer is HTTPS, and the
   mandatory-to-implement secure transport is TLS [RFC5246].

   The NETCONF access control model [RFC6536] provides the means to
   restrict access for particular NETCONF or RESTCONF users to a
   preconfigured subset of all available NETCONF or RESTCONF protocol
   operations and content.

   All data nodes defined in the YANG module which can be created,
   modified and deleted (i.e., config true, which is the <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">default).
   These data nodes</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">default)</font></strong> are
   considered sensitive.  Write operations (e.g., edit-config) applied
   to these data nodes without proper protection can negatively affect
   network operations.

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">Security considerations related</font></strike>  <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">The NAT YANG module allows</font></strong> to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">address and prefix translation</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">set parameters to
   prevent a user from aggressively using NAT resources (port-quota),
   rate-limit connections as a guard against Denial-of-Service, or to
   enable notifications so that appropriate measures</font></strong> are
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">discussed in [RFC6888], [RFC6146], [RFC6877], [RFC7757],</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">enforced to
   anticipate traffic drops.  Nevertheless, an attacker who is able to
   access to the NAT can undertake various attacks, such as:

   o  Set a high or low resource limit to cause a DoS attack:

      *  /nat/instances/instance/policy/port-quota

      *  /nat/instances/instance/policy/fragment-limit

      *  /nat/instances/instance/mapping-limit

      *  /nat/instances/instance/connection-limit

   o  Set a low notification threshold to cause useless notifications to
      be generated:

      *  /nat/instances/instance/policy/notify-pool-usage/high-threshold

      *  /nat/instances/instance/notification-limits/notify-addresses-
         usage

      *  /nat/instances/instance/notification-limits/notify-ports-usage

   o  Set an arbitrarily high threshold, which may lead to disable
      notifications:

      *  /nat/instances/instance/policy/notify-pool-usage/high-threshold

      *  /nat/instances/instance/notification-limits/notify-addresses-
         usage

      *  /nat/instances/instance/notification-limits/notify-ports-usage

   o  Set a low notification interval</font></strong> and
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">[RFC6296].</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">a low notification threshold
      to induce useless notifications to be generated:

      *  /nat/instances/instance/policy/notify-pool-usage/notify-
         interval

      *  /nat/instances/instance/notification-limits/notify-interval

   o  Access to privacy data maintained in the mapping table.  Such data
      can be misused to track the activity of a host:

      *  /nat/instances/instance/mapping-table</font></strong>

5.  IANA Considerations

   This document requests IANA to register the following URI in the
   "IETF XML Registry" [RFC3688]:

            URI: urn:ietf:params:xml:ns:yang:ietf-nat
            Registrant Contact: The IESG.
            XML: N/A; the requested URI is an XML namespace.

   This document requests IANA to register the following YANG module in
   the "YANG Module Names" registry [RFC7950].

            name: ietf-nat
            namespace: urn:ietf:params:xml:ns:yang:ietf-nat
            prefix: nat
            reference: RFC XXXX

6.  Acknowledgements

   Many thanks to Dan Wing and Tianran Zhou for the review.

   Thanks to Juergen Schoenwaelder for the comments on the YANG
   structure and the suggestion to use NMDA.

   Thanks to Lee Howard and Jordi Palet for the CLAT comments, Fred
   Baker for the NPTv6 comments, Tore Anderson for EAM SIIT review, and
   Kristian Poscic for the CGN review.

   Special thanks to Maros Marsalek and Marek Gradzki for sharing their
   comments based on the FD.io implementation of an earlier version of
   this module.

   Rajiv Asati suggested to clarify how the module applies for both
   stateless and stateful NAT64.

   Juergen Schoenwaelder provided an early yandgoctors review.  Many
   thanks to him.

7.  References

7.1.  Normative References

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              &lt;https://www.rfc-editor.org/info/rfc3688&gt;.

   [RFC4787]  Audet, F., Ed. and C. Jennings, "Network Address
              Translation (NAT) Behavioral Requirements for Unicast
              UDP", BCP 127, RFC 4787, DOI 10.17487/RFC4787, January
              2007, &lt;https://www.rfc-editor.org/info/rfc4787&gt;.

   [RFC5246]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", RFC 5246,
              DOI 10.17487/RFC5246, August 2008,
              &lt;https://www.rfc-editor.org/info/rfc5246&gt;.

   [RFC5382]  Guha, S., Ed., Biswas, K., Ford, B., Sivakumar, S., and P.
              Srisuresh, "NAT Behavioral Requirements for TCP", BCP 142,
              RFC 5382, DOI 10.17487/RFC5382, October 2008,
              &lt;https://www.rfc-editor.org/info/rfc5382&gt;.

   [RFC5508]  Srisuresh, P., Ford, B., Sivakumar, S., and S. Guha, "NAT
              Behavioral Requirements for ICMP", BCP 148, RFC <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">5508,</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">5508,
              DOI 10.17487/RFC5508, April 2009,
              &lt;https://www.rfc-editor.org/info/rfc5508&gt;.

   [RFC6052]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, "IPv6 Addressing of IPv4/IPv6 Translators", RFC 6052,</font></strong>
              DOI <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">10.17487/RFC5508, April 2009,
              &lt;https://www.rfc-editor.org/info/rfc5508&gt;.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">10.17487/RFC6052, October 2010,
              &lt;https://www.rfc-editor.org/info/rfc6052&gt;.</font></strong>

   [RFC6146]  Bagnulo, M., Matthews, P., and I. van Beijnum, "Stateful
              NAT64: Network Address and Protocol Translation from IPv6
              Clients to IPv4 Servers", RFC 6146, DOI 10.17487/RFC6146,
              April 2011, &lt;https://www.rfc-editor.org/info/rfc6146&gt;.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              &lt;https://www.rfc-editor.org/info/rfc6241&gt;.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              &lt;https://www.rfc-editor.org/info/rfc6242&gt;.

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">[RFC6296]  Wasserman, M. and F. Baker, "IPv6-to-IPv6 Network Prefix
              Translation", RFC 6296, DOI 10.17487/RFC6296, June 2011,
              &lt;https://www.rfc-editor.org/info/rfc6296&gt;.</font></strong>

   [RFC6536]  Bierman, A. and M. Bjorklund, "Network Configuration
              Protocol (NETCONF) Access Control Model", RFC 6536,
              DOI 10.17487/RFC6536, March 2012,
              &lt;https://www.rfc-editor.org/info/rfc6536&gt;.

   [RFC6877]  Mawatari, M., Kawashima, M., and C. Byrne, "464XLAT:
              Combination of Stateful and Stateless Translation",
              RFC 6877, DOI 10.17487/RFC6877, April 2013,
              &lt;https://www.rfc-editor.org/info/rfc6877&gt;.

   [RFC6888]  Perreault, S., Ed., Yamagata, I., Miyakawa, S., Nakagawa,
              A., and H. Ashida, "Common Requirements for Carrier-Grade
              NATs (CGNs)", BCP 127, RFC 6888, DOI 10.17487/RFC6888,
              April 2013, &lt;https://www.rfc-editor.org/info/rfc6888&gt;.

   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">[RFC7596]  Cui, Y., Sun, Q., Boucadair, M., Tsou, T., Lee, Y., and I.
              Farrer, "Lightweight 4over6: An Extension to the Dual-
              Stack Lite Architecture", RFC 7596, DOI 10.17487/RFC7596,
              July 2015, &lt;https://www.rfc-editor.org/info/rfc7596&gt;.

   [RFC7597]  Troan, O., Ed., Dec, W., Li, X., Bao, C., Matsushima, S.,
              Murakami, T., and T. Taylor, Ed., "Mapping of Address and
              Port with Encapsulation (MAP-E)", RFC 7597,
              DOI 10.17487/RFC7597, July 2015,
              &lt;https://www.rfc-editor.org/info/rfc7597&gt;.</font></strong>

   [RFC7757]  Anderson, T. and A. Leiva Popper, "Explicit Address
              Mappings for Stateless IP/ICMP Translation", RFC 7757,
              DOI 10.17487/RFC7757, February 2016,
              &lt;https://www.rfc-editor.org/info/rfc7757&gt;.

   [RFC7857]  Penno, R., Perreault, S., Boucadair, M., Ed., Sivakumar,
              S., and K. Naito, "Updates to Network Address Translation
              (NAT) Behavioral Requirements", BCP 127, RFC 7857,
              DOI 10.17487/RFC7857, April 2016,
              &lt;https://www.rfc-editor.org/info/rfc7857&gt;.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              &lt;https://www.rfc-editor.org/info/rfc7950&gt;.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              &lt;https://www.rfc-editor.org/info/rfc8040&gt;.

7.2.  Informative References

   [I-D.boucadair-pcp-yang]
              Boucadair, M., Jacquenet, C., Sivakumar, S., and S.
              Vinapamula, "YANG Modules for the Port Control Protocol
              (PCP)", draft-boucadair-pcp-yang-05 (work in progress),
              October 2017.

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">[I-D.ietf-behave-ipfix-nat-logging]
              Sivakumar, S. and R. Penno, "IPFIX Information Elements
              for logging NAT Events", draft-ietf-behave-ipfix-nat-
              logging-13 (work in progress), January 2017.</font></strike>

   [I-D.ietf-softwire-dslite-yang]
              Boucadair, M., Jacquenet, C., and S. Sivakumar, "YANG Data
              Modules for the DS-Lite", draft-ietf-softwire-dslite-
              yang-07 (work in progress), October 2017.

   [I-D.ietf-tsvwg-natsupp]
              Stewart, R., Tuexen, M., and I. Ruengeler, "Stream Control
              Transmission Protocol (SCTP) Network Address Translation
              Support", draft-ietf-tsvwg-natsupp-11 (work in progress),
              July 2017.

   [RFC2663]  Srisuresh, P. and M. Holdrege, "IP Network Address
              Translator (NAT) Terminology and Considerations",
              RFC 2663, DOI 10.17487/RFC2663, August 1999,
              &lt;https://www.rfc-editor.org/info/rfc2663&gt;.

   [RFC3022]  Srisuresh, P. and K. Egevang, "Traditional IP Network
              Address Translator (Traditional NAT)", RFC 3022,
              DOI 10.17487/RFC3022, January 2001,
              &lt;https://www.rfc-editor.org/info/rfc3022&gt;.

   [RFC5597]  Denis-Courmont, R., "Network Address Translation (NAT)
              Behavioral Requirements for the Datagram Congestion
              Control Protocol", BCP 150, RFC 5597,
              DOI 10.17487/RFC5597, September 2009,
              &lt;https://www.rfc-editor.org/info/rfc5597&gt;.

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">[RFC6052]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, "IPv6 Addressing of IPv4/IPv6 Translators", RFC 6052,
              DOI 10.17487/RFC6052, October 2010,
              &lt;https://www.rfc-editor.org/info/rfc6052&gt;.

   [RFC6296]  Wasserman, M. and F. Baker, "IPv6-to-IPv6 Network Prefix
              Translation", RFC 6296, DOI 10.17487/RFC6296, June 2011,
              &lt;https://www.rfc-editor.org/info/rfc6296&gt;.

   [RFC6302]  Durand, A., Gashinsky, I., Lee, D., and S. Sheppard,
              "Logging Recommendations for Internet-Facing Servers",
              BCP 162, RFC 6302, DOI 10.17487/RFC6302, June 2011,
              &lt;https://www.rfc-editor.org/info/rfc6302&gt;.</font></strike>

   [RFC6736]  Brockners, F., Bhandari, S., Singh, V., and V. Fajardo,
              "Diameter Network Address and Port Translation Control
              Application", RFC 6736, DOI 10.17487/RFC6736, October
              2012, &lt;https://www.rfc-editor.org/info/rfc6736&gt;.

   [RFC6887]  Wing, D., Ed., Cheshire, S., Boucadair, M., Penno, R., and
              P. Selkirk, "Port Control Protocol (PCP)", RFC 6887,
              DOI 10.17487/RFC6887, April 2013,
              &lt;https://www.rfc-editor.org/info/rfc6887&gt;.

   [RFC7289]  Kuarsingh, V., Ed. and J. Cianfarani, "Carrier-Grade NAT
              (CGN) Deployment with BGP/MPLS IP VPNs", RFC 7289,
              DOI 10.17487/RFC7289, June 2014,
              &lt;https://www.rfc-editor.org/info/rfc7289&gt;.

   [RFC7335]  Byrne, C., "IPv4 Service Continuity Prefix", RFC 7335,
              DOI 10.17487/RFC7335, August 2014,
              &lt;https://www.rfc-editor.org/info/rfc7335&gt;.

   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">[RFC7596]  Cui, Y., Sun, Q., Boucadair, M., Tsou, T., Lee, Y., and I.
              Farrer, "Lightweight 4over6: An Extension to the Dual-
              Stack Lite Architecture", RFC 7596, DOI 10.17487/RFC7596,
              July 2015, &lt;https://www.rfc-editor.org/info/rfc7596&gt;.

   [RFC7597]  Troan, O., Ed., Dec, W., Li, X., Bao, C., Matsushima, S.,
              Murakami, T., and T. Taylor, Ed., "Mapping of Address and
              Port with Encapsulation (MAP-E)", RFC 7597,
              DOI 10.17487/RFC7597, July 2015,
              &lt;https://www.rfc-editor.org/info/rfc7597&gt;.</font></strike>

   [RFC7659]  Perreault, S., Tsou, T., Sivakumar, S., and T. Taylor,
              "Definitions of Managed Objects for Network Address
              Translators (NATs)", RFC 7659, DOI 10.17487/RFC7659,
              October 2015, &lt;https://www.rfc-editor.org/info/rfc7659&gt;.

   [RFC7753]  Sun, Q., Boucadair, M., Sivakumar, S., Zhou, C., Tsou, T.,
              and S. Perreault, "Port Control Protocol (PCP) Extension
              for Port-Set Allocation", RFC 7753, DOI 10.17487/RFC7753,
              February 2016, &lt;https://www.rfc-editor.org/info/rfc7753&gt;.

   [RFC8045]  Cheng, D., Korhonen, J., Boucadair, M., and S. Sivakumar,
              "RADIUS Extensions for IP Port Configuration and
              Reporting", RFC 8045, DOI 10.17487/RFC8045, January 2017,
              &lt;https://www.rfc-editor.org/info/rfc8045&gt;.

Appendix A.  Sample Examples

   This section provides a non-exhaustive set of examples to illustrate
   the use of the NAT YANG module.

A.1.  Traditional NAT44

   Traditional NAT44 is a Basic NAT44 or NAPT that is used to share the
   same IPv4 address among hosts that are owned by the same subscriber.
   This is typically the NAT that is embedded in CPE devices.

   This NAT is usually provided with one single external IPv4 address;
   disambiguating connections is achieved by rewriting the source port
   number.  The XML snippet to configure the external IPv4 address in
   such case together with a mapping entry is depicted below:

   &lt;instances&gt;
        &lt;instance&gt;
          &lt;id&gt;1&lt;/id&gt;
          &lt;name&gt;NAT_Subscriber_A&lt;/name&gt;
           ....
          &lt;external-ip-address-pool&gt;
              &lt;pool-id&gt;1&lt;/pool-id&gt;
              &lt;external-ip-pool&gt;
                 192.0.2.1
              &lt;/external-ip-pool&gt;
          &lt;/external-ip-address-pool&gt;
           ....
          &lt;mapping-table&gt;
              ....
              &lt;external-src-address&gt;
                 192.0.2.1
              &lt;/external-src-address&gt;
              ....
          &lt;mapping-table&gt;
        &lt;/instance&gt;
   &lt;/instances&gt;

   The following shows the XML excerpt depicting a dynamic UDP mapping
   entry maintained by a traditional <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">NAT44.</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">NAPT44.</font></strong>  In reference to this
   example, the UDP packet received with a source IPv4 address
   (192.0.2.1) and source port number (1568) is translated into a UDP
   packet having a source IPv4 address (198.51.100.1) and source port
   (15000).  The <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">remaining</font></strong> lifetime of this mapping is 300 seconds.

   &lt;mapping-entry&gt;
     &lt;index&gt;15&lt;/index&gt;
     &lt;type&gt;
        dynamic-explicit
     &lt;/type&gt;
     &lt;transport-protocol&gt;
        17
     &lt;/transport-protocol&gt;
     &lt;internal-src-address&gt;
        192.0.2.1
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/internal-dst-address&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/internal-src-address&gt;</font></strong>
     &lt;internal-src-port&gt;
        &lt;start-port-number&gt;
           1568
        &lt;/start-port-number&gt;
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/internal-dst-port&gt;
     &lt;external-dst-address&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/internal-src-port&gt;
     &lt;external-src-address&gt;</font></strong>
        198.51.100.1
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/external-dst-address&gt;
     &lt;external-dst-port&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-src-address&gt;
     &lt;external-src-port&gt;</font></strong>
        &lt;start-port-number&gt;
           15000
        &lt;/start-port-number&gt;
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/external-dst-port&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-src-port&gt;</font></strong>
     &lt;lifetime&gt;
        300
     &lt;/lifetime&gt;
   &lt;/mapping-entry&gt;

A.2.  CGN

   The following XML snippet shows the example of the capabilities
   supported by a CGN as retrieved using NETCONF.

   &lt;capabilities
     &lt;nat-flavor&gt;
      <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">nat44
     &lt;/nat44-flavor&gt;</font></strike>
      <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">napt44
     &lt;/nat-flavor&gt;</font></strong>
     &lt;restricted-port-support&gt;
      false
     &lt;/restricted-port-support&gt;
     &lt;static-mapping-support&gt;
       true
     &lt;/static-mapping-support&gt;
     &lt;port-randomization-support&gt;
       true
     &lt;/port-randomization-support&gt;
     &lt;port-range-allocation-support&gt;
       true
     &lt;/port-range-allocation-support&gt;
     &lt;port-preservation-suport&gt;
       true
     &lt;/port-preservation-suport&gt;
     &lt;port-parity-preservation-support&gt;
       false
     &lt;/port-parity-preservation-support&gt;
     &lt;address-roundrobin-support&gt;
       true
     &lt;/address-roundrobin-support&gt;
     &lt;paired-address-pooling-support&gt;
       true
     &lt;/paired-address-pooling-support&gt;
     &lt;endpoint-independent-mapping-support&gt;
       true
     &lt;/endpoint-independent-mapping-support&gt;
     &lt;address-dependent-mapping-support&gt;
       false
     &lt;/address-dependent-mapping-support&gt;
     &lt;address-and-port-dependent-mapping-support&gt;
       false
     &lt;/address-and-port-dependent-mapping-support&gt;
     &lt;endpoint-independent-filtering-support&gt;
       true
     &lt;/endpoint-independent-filtering-support&gt;
     &lt;address-dependent-filtering&gt;
       false
     &lt;/address-dependent-filtering&gt;
     &lt;address-and-port-dependent-filtering&gt;
       false
     &lt;/address-and-port-dependent-filtering&gt;
   &lt;/capabilities&gt;
   The following XML snippet shows the example of a CGN that is
   provisioned with one contiguous pool of external IPv4 addresses
   (192.0.2.0/24).  Further, the CGN is instructed to limit the number
   of allocated ports per subscriber to 1024.  Ports can be allocated by
   the CGN by assigning ranges of 256 ports (that is, a subscriber can
   be allocated up to four port ranges of 256 ports each).

   &lt;instances&gt;
        &lt;instance&gt;
          &lt;id&gt;1&lt;/id&gt;
          &lt;name&gt;myCGN&lt;/name&gt;
           ....
          &lt;external-ip-address-pool&gt;
              &lt;pool-id&gt;1&lt;/pool-id&gt;
              &lt;external-ip-pool&gt;
                  192.0.2.0/24
              &lt;/external-ip-pool&gt;
          &lt;/external-ip-address-pool&gt;
          &lt;port-quota&gt;
            &lt;port-limit&gt;
              1024
            &lt;/port-limit&gt;
            &lt;quota-type &gt;
              all
            &lt;/quota-type &gt;
          &lt;/port-quota&gt;
          &lt;port-allocation-type&gt;
              port-range-allocation
          &lt;/port-allocation-type&gt;
          &lt;port-set&gt;
             &lt;port-set-size&gt;
                256
             &lt;/port-set-size&gt;
          &lt;/port-set&gt;
           ....
        &lt;/instance&gt;
   &lt;/instances&gt;

   An administrator may decide to allocate one single port range per
   subscriber (port range of 1024 ports) as shown below:

   &lt;instances&gt;
        &lt;instance&gt;
          &lt;id&gt;1&lt;/id&gt;
          &lt;name&gt;myotherCGN&lt;/name&gt;
           ....
          &lt;external-ip-address-pool&gt;
              &lt;pool-id&gt;1&lt;/pool-id&gt;
              &lt;external-ip-pool&gt;
                  192.0.2.0/24
              &lt;/external-ip-pool&gt;
          &lt;/external-ip-address-pool&gt;
          &lt;port-quota&gt;
            &lt;port-limit&gt;
              1024
            &lt;/port-limit&gt;
            &lt;quota-type &gt;
              all
            &lt;/quota-type &gt;
          &lt;/port-quota&gt;
          &lt;port-allocation-type&gt;
              port-range-allocation
          &lt;/port-allocation-type&gt;
          &lt;port-set&gt;
             &lt;port-set-size&gt;
                  1024
             &lt;/port-set-size&gt;
             ....
          &lt;/port-set&gt;
           ....
        &lt;/instance&gt;
   &lt;/instances&gt;

A.3.  CGN Pass-Through

   Figure 1 illustrates an example of the CGN pass-through feature.

                     X1:x1            X1':x1'            X2:x2
                     +---+from X1:x1  +---+from X1:x1    +---+
                     | C |  to X2:x2  |   |  to X2:x2    | S |
                     | l |&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;| C |&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;| e |
                     | i |            | G |              | r |
                     | e |&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;| N |&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;| v |
                     | n |from X2:x2  |   |from X2:x2    | e |
                     | t |  to X1:x1  |   |  to X1:x1    | r |
                     +---+            +---+              +---+

                        Figure 1: CGN Pass-Through

   For example, in order to disable NAT for communications issued by the
   client (192.0.2.25), the following configuration parameter must be
   set:

   &lt;nat-pass-through&gt;
        ...
        &lt;prefix&gt;192.0.2.25&lt;/prefix&gt;
        ...
   &lt;/nat-pass-through&gt;

A.4.  NAT64

   Let's consider the example of a NAT64 that should use
   2001:db8:122:300::/56 to perform IPv6 address synthesis [RFC6052].
   The XML snippet to configure the NAT64 prefix in such case is
   depicted below:

   &lt;nat64-prefixes&gt;
      &lt;nat64-prefix&gt;
        2001:db8:122:300::/56
      &lt;/nat64-prefix&gt;
   &lt;/nat64-prefixes&gt;

   A NAT64 can be instructed to behave in the stateless mode by
   providing the following configuration.  The same NAT64 prefix is used
   for constructing both <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">IPv4- translatable</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">IPv4-translatable</font></strong> IPv6 addresses and
   IPv4-converted IPv6 addresses (Section 3.3 of [RFC6052]).

   &lt;nat64-prefixes&gt;
      &lt;nat64-prefix&gt;
        2001:db8:122:300::/56
      &lt;/nat64-prefix&gt;
      &lt;stateless-enable&gt;
       true
      &lt;/stateless-enable&gt;
   &lt;/nat64-prefixes&gt;

   Let's now consider the example of a NAT64 that should use
   2001:db8:122::/48 to perform IPv6 address synthesis [RFC6052] only if
   the destination address matches 198.51.100.0/24.  The XML snippet to
   configure the NAT64 prefix in such case is shown below:

   &lt;nat64-prefixes&gt;
      &lt;nat64-prefix&gt;
         2001:db8:122::/48
      &lt;/nat64-prefix&gt;
      &lt;destination-ipv4-prefix&gt;
         &lt;ipv4-prefix&gt;
             198.51.100.0/24
         &lt;/ipv4-prefix&gt;
      &lt;/destination-ipv4-prefix&gt;
   &lt;/nat64-prefixes&gt;

A.5.  Explicit Address Mappings for Stateless IP/ICMP Translation

   As specified in [RFC7757], an EAM consists of an IPv4 prefix and an
   IPv6 prefix.  Let's consider the set of EAM examples in Figure 2.

                  +---+----------------+----------------------+
                  | # |  IPv4 Prefix   |     IPv6 Prefix      |
                  +---+----------------+----------------------+
                  | 1 | 192.0.2.1      | 2001:db8:aaaa::      |
                  | 2 | 192.0.2.2/32   | 2001:db8:bbbb::b/128 |
                  | 3 | 192.0.2.16/28  | 2001:db8:cccc::/124  |
                  | 4 | 192.0.2.128/26 | 2001:db8:dddd::/64   |
                  | 5 | 192.0.2.192/29 | 2001:db8:eeee:8::/62 |
                  | 6 | 192.0.2.224/31 | 64:ff9b::/127        |
                  +---+----------------+----------------------+

                     Figure 2: EAM Examples (RFC7757)

   The following XML excerpt illustrates how these EAMs can be
   configured using the YANG NAT module:

   &lt;eam&gt;
     &lt;ipv4-prefix&gt;
        192.0.2.1
     &lt;/ipv4-prefix&gt;
     &lt;ipv6-prefix&gt;
        2001:db8:aaaa::
     &lt;/ipv6-prefix&gt;
   &lt;/eam&gt;
   &lt;eam&gt;
     &lt;ipv4-prefix&gt;
        192.0.2.2/32
     &lt;/ipv4-prefix&gt;
     &lt;ipv6-prefix&gt;
        2001:db8:bbbb::b/128
     &lt;/ipv6-prefix&gt;
   &lt;/eam&gt;
   &lt;eam&gt;
     &lt;ipv4-prefix&gt;
        192.0.2.16/28
     &lt;/ipv4-prefix&gt;
     &lt;ipv6-prefix&gt;
        2001:db8:cccc::/124
     &lt;/ipv6-prefix&gt;
   &lt;/eam&gt;
   &lt;eam&gt;
     &lt;ipv4-prefix&gt;
        192.0.2.128/26
     &lt;/ipv4-prefix&gt;
     &lt;ipv6-prefix&gt;
        2001:db8:dddd::/64
     &lt;/ipv6-prefix&gt;
   &lt;/eam&gt;
   &lt;eam&gt;
     &lt;ipv4-prefix&gt;
        192.0.2.192/29
     &lt;/ipv4-prefix&gt;
     &lt;ipv6-prefix&gt;
        2001:db8:eeee:8::/62
     &lt;/ipv6-prefix&gt;
   &lt;/eam&gt;
   &lt;eam&gt;
     &lt;ipv4-prefix&gt;
        192.0.2.224/31
     &lt;/ipv4-prefix&gt;
     &lt;ipv6-prefix&gt;
        64:ff9b::/127
     &lt;/ipv6-prefix&gt;
   &lt;/eam&gt;
   EAMs may be enabled jointly with statefull NAT64.  This example shows
   a NAT64 fucntion that supports static mappings:

   &lt;capabilities
     &lt;nat-flavor&gt;
      nat64
     &lt;/nat44-flavor&gt;
     &lt;static-mapping-support&gt;
       true
     &lt;/static-mapping-support&gt;
     &lt;port-randomization-support&gt;
       true
     &lt;/port-randomization-support&gt;
     &lt;port-range-allocation-support&gt;
       true
     &lt;/port-range-allocation-support&gt;
     &lt;port-preservation-suport&gt;
       true
     &lt;/port-preservation-suport&gt;
     &lt;port-parity-preservation-support&gt;
       false
     &lt;/port-parity-preservation-support&gt;
     &lt;address-roundrobin-support&gt;
       true
     &lt;/address-roundrobin-support&gt;
     &lt;paired-address-pooling-support&gt;
       true
     &lt;/paired-address-pooling-support&gt;
     &lt;endpoint-independent-mapping-support&gt;
       true
     &lt;/endpoint-independent-mapping-support&gt;
     &lt;address-dependent-mapping-support&gt;
       false
     &lt;/address-dependent-mapping-support&gt;
     &lt;address-and-port-dependent-mapping-support&gt;
       false
     &lt;/address-and-port-dependent-mapping-support&gt;
     &lt;endpoint-independent-filtering-support&gt;
       true
     &lt;/endpoint-independent-filtering-support&gt;
     &lt;address-dependent-filtering&gt;
       false
     &lt;/address-dependent-filtering&gt;
     &lt;address-and-port-dependent-filtering&gt;
       false
     &lt;/address-and-port-dependent-filtering&gt;
   &lt;/capabilities&gt;

A.6.  Static Mappings with Port Ranges

   The following example shows a static mapping that instructs a NAT to
   translate packets issued from 192.0.2.1 and with source ports in the
   100-500 range to 198.51.100.1:1100-1500.

   &lt;mapping-entry&gt;
     &lt;index&gt;1&lt;/index&gt;
     &lt;type&gt;static&lt;/type&gt;
     &lt;transport-protocol&gt;6&lt;/transport-protocol&gt;
     &lt;internal-src-address&gt;
        192.0.2.1
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/internal-dst-address&gt;
     &lt;internal-dst-port&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/internal-src-address&gt;
     &lt;internal-src-port&gt;</font></strong>
       &lt;start-port-number&gt;
          100
       &lt;/start-port-number&gt;
       &lt;end-port-number&gt;
         500
       &lt;/end-port-number&gt;
     &lt;/internal-dst-port&gt;
     &lt;external-src-address&gt;
        198.51.100.1
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/external-dst-address&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-src-address&gt;</font></strong>
     &lt;external-src-port&gt;
        &lt;start-port-number&gt;
          1100
        &lt;/start-port-number&gt;
        &lt;end-port-number&gt;
          1500
        &lt;/end-port-number&gt;
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/external-dst-port&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-src-port&gt;</font></strong>
     ...
   &lt;/mapping-entry&gt;

A.7.  Static Mappings with IP Prefixes

   The following example shows a static mapping that instructs a NAT to
   translate <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">TCP</font></strong> packets issued from 192.0.2.1/24 to 198.51.100.1/24.

   &lt;mapping-entry&gt;
     &lt;index&gt;1&lt;/index&gt;
     &lt;type&gt;static&lt;/type&gt;
     &lt;transport-protocol&gt;6&lt;/transport-protocol&gt;
     &lt;internal-src-address&gt;
        192.0.2.1/24
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/internal-dst-address&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/internal-src-address&gt;</font></strong>
     &lt;external-src-address&gt;
        198.51.100.1/24
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/external-dst-address&gt;</font></strike>
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-src-address&gt;</font></strong>
     ...
   &lt;/mapping-entry&gt;

A.8.  Destination NAT

   The following XML snippet shows an example <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">of</font></strong> a destination NAT that
   is instructed to translate <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">all</font></strong> packets having 192.0.2.1 as a
   destination IP address to 198.51.100.1.

   &lt;dst-ip-address-pool&gt;
      &lt;pool-id&gt;1&lt;/pool-id&gt;
      &lt;dst-in-ip-pool&gt;
        192.0.2.1
      &lt;/dst-in-ip-pool&gt;
      &lt;dst-out-ip-pool&gt;
        198.51.100.1
      &lt;/dst-out-ip-pool&gt;
   &lt;/dst-ip-address-pool&gt;

   In order to instruct a NAT to translate TCP packets destined to
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">192.0.2.1:80</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">'192.0.2.1:80'</font></strong> to <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">198.51.100.1:8080,</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">'198.51.100.1:8080',</font></strong> the following XML snippet
   shows the static mapping to be configured on the NAT:

   &lt;mapping-entry&gt;
     &lt;index&gt;1&lt;/index&gt;
     &lt;type&gt;static&lt;/type&gt;
     &lt;transport-protocol&gt;6&lt;/transport-protocol&gt;
     &lt;internal-dst-address&gt;
        192.0.2.1
     &lt;/internal-dst-address&gt;
     &lt;internal-dst-port&gt;
         &lt;start-port-number&gt;80&lt;/start-port-number&gt;
     &lt;/internal-dst-port&gt;
     &lt;external-dst-address&gt;
         198.51.100.1
     &lt;/external-dst-address&gt;
     &lt;external-dst-port&gt;
         &lt;start-port-number&gt;8080&lt;/start-port-number&gt;
     &lt;/external-dst-port&gt;
   &lt;/mapping-entry&gt;

   In order to instruct a NAT to translate TCP packets destined to
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">192.0.2.1:80</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">'192.0.2.1:80'</font></strong> (http traffic) to 198.51.100.1 and <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">192.0.2.1:22</font></strike> <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">'192.0.2.1:22'</font></strong> (ssh
   traffic) to 198.51.100.2, the following XML snippet shows the static
   mappings to be configured on the NAT:

   &lt;mapping-entry&gt;
     &lt;index&gt;1&lt;/index&gt;
     &lt;type&gt;static&lt;/type&gt;
     &lt;transport-protocol&gt;6&lt;/transport-protocol&gt;
     &lt;internal-dst-address&gt;
       192.0.2.1
     &lt;/internal-dst-address&gt;
     &lt;internal-dst-port&gt;
       &lt;start-port-number&gt;
         80
       &lt;/start-port-number&gt;
     &lt;/internal-dst-port&gt;
     &lt;external-dst-address&gt;
       198.51.100.1
     &lt;/external-dst-address&gt;
     ...
   &lt;/mapping-entry&gt;
   &lt;mapping-entry&gt;
     &lt;index&gt;2&lt;/index&gt;
     &lt;type&gt;static&lt;/type&gt;
     &lt;transport-protocol&gt;
        6
     &lt;/transport-protocol&gt;
     &lt;internal-dst-address&gt;
       192.0.2.1
     &lt;/internal-dst-address&gt;
     &lt;internal-dst-port&gt;
       &lt;start-port-number&gt;
         22
       &lt;/start-port-number&gt;
     &lt;/internal-dst-port&gt;
     &lt;external-dst-address&gt;
       198.51.100.2
     &lt;/external-dst-address&gt;
     ...
   &lt;/mapping-entry&gt;

   The NAT may also be instructed to proceed with both source and
   destination NAT.  To do so, in addition to the above sample to
   configure destination NAT, the NAT may be provided, for example with
   a pool of external IP addresses (198.51.100.0/24) to use for source
   address translation.  An example of the corresponding XML snippet is
   provided hereafter:

   &lt;external-ip-address-pool&gt;
     &lt;pool-id&gt;1&lt;/pool-id&gt;
     &lt;external-ip-pool&gt;
        198.51.100.0/24
     &lt;/external-ip-pool&gt;
   &lt;/external-ip-address-pool&gt;

   Instead of providing an external IP address to share, the NAT may be
   configured with static mapping entries that modifies the internal IP
   address and/or port number.

A.9.  CLAT

   The following XML snippet shows the example of a CLAT that is
   configured with 2001:db8:1234::/96 as PLAT-side IPv6 prefix and
   2001:db8:aaaa::/96 as CLAT-side IPv6 prefix.  The CLAT is also
   provided with 192.0.0.1/32 (which is selected from the IPv4 service
   continuity prefix defined in [RFC7335]).

   &lt;clat-ipv6-prefixes&gt;
      &lt;ipv6-prefix&gt;
        2001:db8:aaaa::/96
      &lt;/ipv6-prefix&gt;
   &lt;/clat-ipv6-prefixes&gt;
   &lt;clat-ipv4-prefixes&gt;
      &lt;ipv4-prefix&gt;
        192.0.0.1/32
      &lt;/ipv4-prefix&gt;
   &lt;/clat-ipv4-prefixes&gt;
   &lt;nat64-prefixes&gt;
      &lt;nat64-prefix&gt;
        2001:db8:1234::/96
      &lt;/nat64-prefix&gt;
   &lt;/nat64-prefixes&gt;

A.10.  NPTv6

   Let's consider the example of a NPTv6 translator that should rewrite
   packets with the source prefix (fd01:203:405:/48) with the external
   prefix (2001:db8:1:/48).  The internal interface is "eth0" while the
   external interface is "eth1".

                  External Network:  Prefix = 2001:db8:1:/48
                      --------------------------------------
                                        |
                                        |eth1
                                 +-------------+
                             eth4|     NPTv6   |eth2
                         ...-----|             |------...
                                 +-------------+
                                        |eth0
                                        |
                      --------------------------------------
                  Internal Network:  Prefix = fd01:203:405:/48

                        Example of NPTv6 (RFC6296)

   The XML snippet to configure NPTv6 prefixes in such case is depicted
   below:

   &lt;nptv6-prefixes&gt;
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;translation-id&gt;1&lt;/translation-id&gt;</font></strike>
     &lt;internal-ipv6-prefix&gt;
       fd01:203:405:/48
     &lt;/internal-ipv6-prefix&gt;
     &lt;external-ipv6-prefix&gt;
       2001:db8:1:/48
     &lt;/external-ipv6-prefix&gt;
   &lt;/nptv6-prefixes&gt;
   ...
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;external-interfaces&gt;</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;external-realm&gt;</font></strong>
    &lt;external-interface&gt;
      eth1
    &lt;/external-interface&gt;
   <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;/external-interfaces&gt;</font></strike>
   <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-realm&gt;</font></strong>

   Figure 3 shows an example of an NPTv6 that interconnects two internal
   networks (fd01:203:405:/48 and fd01:4444:5555:/48); each is
   translated using a dedicated prefix (2001:db8:1:/48 and
   2001:db8:6666:/48, respectively).

                     Internal Prefix = fd01:4444:5555:/48
                     --------------------------------------
                          V            |      External Prefix
                          V            |eth1     2001:db8:1:/48
                          V        +---------+      ^
                          V        |  NPTv6  |      ^
                          V        |         |      ^
                          V        +---------+      ^
                 External Prefix       |eth0        ^
                 2001:db8:6666:/48     |            ^
                     --------------------------------------
                     Internal Prefix = fd01:203:405:/48

             Figure 3: Connecting two Peer Networks (RFC6296)

   To that aim, the following configuration is provided to the NPTv6:

   &lt;policy&gt;
    &lt;id&gt;1&lt;/id&gt;
    &lt;nptv6-prefixes&gt;
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;translation-id&gt;1&lt;/translation-id&gt;</font></strike>
     &lt;internal-ipv6-prefix&gt;
       fd01:203:405:/48
     &lt;/internal-ipv6-prefix&gt;
     &lt;external-ipv6-prefix&gt;
       2001:db8:1:/48
     &lt;/external-ipv6-prefix&gt;
     &lt;/nptv6-prefixes&gt;
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;external-realm&gt;</font></strong>
      &lt;external-interface&gt;
       eth1
      &lt;/external-interface&gt;
     <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-realm&gt;</font></strong>
   &lt;/policy&gt;
   &lt;policy&gt;
    &lt;id&gt;2&lt;/id&gt;
    &lt;nptv6-prefixes&gt;
     <strike style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="red">&lt;translation-id&gt;2&lt;/translation-id&gt;</font></strike>
     &lt;internal-ipv6-prefix&gt;
         fd01:4444:5555:/48
     &lt;/internal-ipv6-prefix&gt;
     &lt;external-ipv6-prefix&gt;
         2001:db8:6666:/48
     &lt;/external-ipv6-prefix&gt;
    &lt;/nptv6-prefixes&gt;
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;external-realm&gt;</font></strong>
     &lt;external-interface&gt;
      eth0
     &lt;/external-interface&gt;
    <strong style="font-size: 14.3px !important; line-height: 17.71px !important;"><font style="font-size: 14.3px !important; line-height: 17.71px !important;" color="green">&lt;/external-realm&gt;</font></strong>
   &lt;/policy&gt;

Authors' Addresses

   Mohamed Boucadair
   Orange
   Rennes  35000
   France

   Email: mohamed.boucadair@orange.com
   Senthil Sivakumar
   Cisco Systems
   7100-8 Kit Creek Road
   Research Triangle Park, North Carolina  27709
   USA

   Phone: +1 919 392 5158
   Email: ssenthil@cisco.com

   Christian Jacquenet
   Orange
   Rennes  35000
   France

   Email: christian.jacquenet@orange.com

   Suresh Vinapamula
   Juniper Networks
   1133 Innovation Way
   Sunnyvale  94089
   USA

   Email: sureshk@juniper.net

   Qin Wu
   Huawei
   101 Software Avenue, Yuhua District
   Nanjing, Jiangsu  210012
   China

   Email: bill.wu@huawei.com
</pre>

</body></html>